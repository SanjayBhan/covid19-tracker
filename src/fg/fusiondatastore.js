!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).FusionDataStore=e()}(this,(function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=function(t){return t&&t.Math==Math&&t},r=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")(),o=function(t){try{return!!t()}catch(t){return!0}},i=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),a={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,s={f:u&&!a.call({1:2},1)?function(t){var e=u(this,t);return!!e&&e.enumerable}:a},c=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},f={}.toString,l=function(t){return f.call(t).slice(8,-1)},h="".split,p=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==l(t)?h.call(t,""):Object(t)}:Object,d=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},g=function(t){return p(d(t))},m=function(t){return"object"==typeof t?null!==t:"function"==typeof t},v=function(t,e){if(!m(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!m(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!m(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!m(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},y={}.hasOwnProperty,b=function(t,e){return y.call(t,e)},w=r.document,_=m(w)&&m(w.createElement),T=function(t){return _?w.createElement(t):{}},x=!i&&!o((function(){return 7!=Object.defineProperty(T("div"),"a",{get:function(){return 7}}).a})),S=Object.getOwnPropertyDescriptor,A={f:i?S:function(t,e){if(t=g(t),e=v(e,!0),x)try{return S(t,e)}catch(t){}if(b(t,e))return c(!s.f.call(t,e),t[e])}},C=function(t){if(!m(t))throw TypeError(String(t)+" is not an object");return t},F=Object.defineProperty,E={f:i?F:function(t,e,n){if(C(t),e=v(e,!0),C(n),x)try{return F(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},D=i?function(t,e,n){return E.f(t,e,c(1,n))}:function(t,e,n){return t[e]=n,t},M=function(t,e){try{D(r,t,e)}catch(n){r[t]=e}return e},I=r["__core-js_shared__"]||M("__core-js_shared__",{}),O=Function.toString;"function"!=typeof I.inspectSource&&(I.inspectSource=function(t){return O.call(t)});var U,k,N,j=I.inspectSource,L=r.WeakMap,R="function"==typeof L&&/native code/.test(j(L)),Y=e((function(t){(t.exports=function(t,e){return I[t]||(I[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),H=0,P=Math.random(),B=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++H+P).toString(36)},V=Y("keys"),z=function(t){return V[t]||(V[t]=B(t))},W={},G=r.WeakMap;if(R){var q=new G,Q=q.get,Z=q.has,X=q.set;U=function(t,e){return X.call(q,t,e),e},k=function(t){return Q.call(q,t)||{}},N=function(t){return Z.call(q,t)}}else{var $=z("state");W[$]=!0,U=function(t,e){return D(t,$,e),e},k=function(t){return b(t,$)?t[$]:{}},N=function(t){return b(t,$)}}var J,K,tt={set:U,get:k,has:N,enforce:function(t){return N(t)?k(t):U(t,{})},getterFor:function(t){return function(e){var n;if(!m(e)||(n=k(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},et=e((function(t){var e=tt.get,n=tt.enforce,o=String(String).split("String");(t.exports=function(t,e,i,a){var u=!!a&&!!a.unsafe,s=!!a&&!!a.enumerable,c=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof e||b(i,"name")||D(i,"name",e),n(i).source=o.join("string"==typeof e?e:"")),t!==r?(u?!c&&t[e]&&(s=!0):delete t[e],s?t[e]=i:D(t,e,i)):s?t[e]=i:M(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||j(this)}))})),nt=r,rt=function(t){return"function"==typeof t?t:void 0},ot=function(t,e){return arguments.length<2?rt(nt[t])||rt(r[t]):nt[t]&&nt[t][e]||r[t]&&r[t][e]},it=Math.ceil,at=Math.floor,ut=function(t){return isNaN(t=+t)?0:(t>0?at:it)(t)},st=Math.min,ct=function(t){return t>0?st(ut(t),9007199254740991):0},ft=Math.max,lt=Math.min,ht=function(t,e){var n=ut(t);return n<0?ft(n+e,0):lt(n,e)},pt=function(t){return function(e,n,r){var o,i=g(e),a=ct(i.length),u=ht(r,a);if(t&&n!=n){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===n)return t||u||0;return!t&&-1}},dt={includes:pt(!0),indexOf:pt(!1)},gt=dt.indexOf,mt=function(t,e){var n,r=g(t),o=0,i=[];for(n in r)!b(W,n)&&b(r,n)&&i.push(n);for(;e.length>o;)b(r,n=e[o++])&&(~gt(i,n)||i.push(n));return i},vt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],yt=vt.concat("length","prototype"),bt={f:Object.getOwnPropertyNames||function(t){return mt(t,yt)}},wt={f:Object.getOwnPropertySymbols},_t=ot("Reflect","ownKeys")||function(t){var e=bt.f(C(t)),n=wt.f;return n?e.concat(n(t)):e},Tt=function(t,e){for(var n=_t(e),r=E.f,o=A.f,i=0;i<n.length;i++){var a=n[i];b(t,a)||r(t,a,o(e,a))}},xt=/#|\.prototype\./,St=function(t,e){var n=Ct[At(t)];return n==Et||n!=Ft&&("function"==typeof e?o(e):!!e)},At=St.normalize=function(t){return String(t).replace(xt,".").toLowerCase()},Ct=St.data={},Ft=St.NATIVE="N",Et=St.POLYFILL="P",Dt=St,Mt=A.f,It=function(t,e){var n,o,i,a,u,s=t.target,c=t.global,f=t.stat;if(n=c?r:f?r[s]||M(s,{}):(r[s]||{}).prototype)for(o in e){if(a=e[o],i=t.noTargetGet?(u=Mt(n,o))&&u.value:n[o],!Dt(c?o:s+(f?".":"#")+o,t.forced)&&void 0!==i){if(typeof a==typeof i)continue;Tt(a,i)}(t.sham||i&&i.sham)&&D(a,"sham",!0),et(n,o,a,t)}},Ot=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Ut=function(t,e,n){if(Ot(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},kt=function(t){return Object(d(t))},Nt=Array.isArray||function(t){return"Array"==l(t)},jt=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())})),Lt=jt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Rt=Y("wks"),Yt=r.Symbol,Ht=Lt?Yt:Yt&&Yt.withoutSetter||B,Pt=function(t){return b(Rt,t)||(jt&&b(Yt,t)?Rt[t]=Yt[t]:Rt[t]=Ht("Symbol."+t)),Rt[t]},Bt=Pt("species"),Vt=function(t,e){var n;return Nt(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Nt(n.prototype)?m(n)&&null===(n=n[Bt])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},zt=[].push,Wt=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,a=5==t||i;return function(u,s,c,f){for(var l,h,d=kt(u),g=p(d),m=Ut(s,c,3),v=ct(g.length),y=0,b=f||Vt,w=e?b(u,v):n?b(u,0):void 0;v>y;y++)if((a||y in g)&&(h=m(l=g[y],y,d),t))if(e)w[y]=h;else if(h)switch(t){case 3:return!0;case 5:return l;case 6:return y;case 2:zt.call(w,l)}else if(o)return!1;return i?-1:r||o?o:w}},Gt={forEach:Wt(0),map:Wt(1),filter:Wt(2),some:Wt(3),every:Wt(4),find:Wt(5),findIndex:Wt(6)},qt=ot("navigator","userAgent")||"",Qt=r.process,Zt=Qt&&Qt.versions,Xt=Zt&&Zt.v8;Xt?K=(J=Xt.split("."))[0]+J[1]:qt&&(!(J=qt.match(/Edge\/(\d+)/))||J[1]>=74)&&(J=qt.match(/Chrome\/(\d+)/))&&(K=J[1]);var $t=K&&+K,Jt=Pt("species"),Kt=function(t){return $t>=51||!o((function(){var e=[];return(e.constructor={})[Jt]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},te=Object.defineProperty,ee={},ne=function(t){throw t},re=function(t,e){if(b(ee,t))return ee[t];e||(e={});var n=[][t],r=!!b(e,"ACCESSORS")&&e.ACCESSORS,a=b(e,0)?e[0]:ne,u=b(e,1)?e[1]:void 0;return ee[t]=!!n&&!o((function(){if(r&&!i)return!0;var t={length:-1};r?te(t,1,{enumerable:!0,get:ne}):t[1]=1,n.call(t,a,u)}))},oe=Gt.filter,ie=Kt("filter"),ae=re("filter");It({target:"Array",proto:!0,forced:!ie||!ae},{filter:function(t){return oe(this,t,arguments.length>1?arguments[1]:void 0)}});var ue,se=Object.keys||function(t){return mt(t,vt)},ce=i?Object.defineProperties:function(t,e){C(t);for(var n,r=se(e),o=r.length,i=0;o>i;)E.f(t,n=r[i++],e[n]);return t},fe=ot("document","documentElement"),le=z("IE_PROTO"),he=function(){},pe=function(t){return"<script>"+t+"<\/script>"},de=function(){try{ue=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;de=ue?function(t){t.write(pe("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ue):((e=T("iframe")).style.display="none",fe.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(pe("document.F=Object")),t.close(),t.F);for(var n=vt.length;n--;)delete de.prototype[vt[n]];return de()};W[le]=!0;var ge=Object.create||function(t,e){var n;return null!==t?(he.prototype=C(t),n=new he,he.prototype=null,n[le]=t):n=de(),void 0===e?n:ce(n,e)},me=Pt("unscopables"),ve=Array.prototype;null==ve[me]&&E.f(ve,me,{configurable:!0,value:ge(null)});var ye=function(t){ve[me][t]=!0},be=dt.includes,we=re("indexOf",{ACCESSORS:!0,1:0});It({target:"Array",proto:!0,forced:!we},{includes:function(t){return be(this,t,arguments.length>1?arguments[1]:void 0)}}),ye("includes");var _e=function(t,e){var n=[][t];return!!n&&o((function(){n.call(null,e||function(){throw 1},1)}))},Te=dt.indexOf,xe=[].indexOf,Se=!!xe&&1/[1].indexOf(1,-0)<0,Ae=_e("indexOf"),Ce=re("indexOf",{ACCESSORS:!0,1:0});It({target:"Array",proto:!0,forced:Se||!Ae||!Ce},{indexOf:function(t){return Se?xe.apply(this,arguments)||0:Te(this,t,arguments.length>1?arguments[1]:void 0)}});var Fe=Gt.map,Ee=Kt("map"),De=re("map");It({target:"Array",proto:!0,forced:!Ee||!De},{map:function(t){return Fe(this,t,arguments.length>1?arguments[1]:void 0)}});var Me=function(t,e,n){var r=v(e);r in t?E.f(t,r,c(0,n)):t[r]=n},Ie=Kt("slice"),Oe=re("slice",{ACCESSORS:!0,0:0,1:2}),Ue=Pt("species"),ke=[].slice,Ne=Math.max;It({target:"Array",proto:!0,forced:!Ie||!Oe},{slice:function(t,e){var n,r,o,i=g(this),a=ct(i.length),u=ht(t,a),s=ht(void 0===e?a:e,a);if(Nt(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!Nt(n.prototype)?m(n)&&null===(n=n[Ue])&&(n=void 0):n=void 0,n===Array||void 0===n))return ke.call(i,u,s);for(r=new(void 0===n?Array:n)(Ne(s-u,0)),o=0;u<s;u++,o++)u in i&&Me(r,o,i[u]);return r.length=o,r}});var je=Object.assign,Le=Object.defineProperty,Re=!je||o((function(){if(i&&1!==je({b:1},je(Le({},"a",{enumerable:!0,get:function(){Le(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=je({},t)[n]||"abcdefghijklmnopqrst"!=se(je({},e)).join("")}))?function(t,e){for(var n=kt(t),r=arguments.length,o=1,a=wt.f,u=s.f;r>o;)for(var c,f=p(arguments[o++]),l=a?se(f).concat(a(f)):se(f),h=l.length,d=0;h>d;)c=l[d++],i&&!u.call(f,c)||(n[c]=f[c]);return n}:je;It({target:"Object",stat:!0,forced:Object.assign!==Re},{assign:Re});var Ye=o((function(){se(1)}));It({target:"Object",stat:!0,forced:Ye},{keys:function(t){return se(kt(t))}});var He=Pt("match"),Pe=function(t){var e;return m(t)&&(void 0!==(e=t[He])?!!e:"RegExp"==l(t))},Be=function(t){if(Pe(t))throw TypeError("The method doesn't accept regular expressions");return t},Ve=Pt("match");function ze(t){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function We(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qe(t,e,n){return e&&Ge(t.prototype,e),n&&Ge(t,n),t}function Qe(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}It({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[Ve]=!1,"/./"[t](e)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~String(d(this)).indexOf(Be(t),arguments.length>1?arguments[1]:void 0)}});var Ze=Kt("splice"),Xe=re("splice",{ACCESSORS:!0,0:0,1:2}),$e=Math.max,Je=Math.min;It({target:"Array",proto:!0,forced:!Ze||!Xe},{splice:function(t,e){var n,r,o,i,a,u,s=kt(this),c=ct(s.length),f=ht(t,c),l=arguments.length;if(0===l?n=r=0:1===l?(n=0,r=c-f):(n=l-2,r=Je($e(ut(e),0),c-f)),c+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(o=Vt(s,r),i=0;i<r;i++)(a=f+i)in s&&Me(o,i,s[a]);if(o.length=r,n<r){for(i=f;i<c-r;i++)u=i+n,(a=i+r)in s?s[u]=s[a]:delete s[u];for(i=c;i>c-r+n;i--)delete s[i-1]}else if(n>r)for(i=c-r;i>f;i--)u=i+n-1,(a=i+r-1)in s?s[u]=s[a]:delete s[u];for(i=0;i<n;i++)s[i+f]=arguments[i+2];return s.length=c-r+n,o}});var Ke=E.f,tn=Function.prototype,en=tn.toString,nn=/^\s*function ([^ (]*)/;!i||"name"in tn||Ke(tn,"name",{configurable:!0,get:function(){try{return en.call(this).match(nn)[1]}catch(t){return""}}});var rn=Gt.findIndex,on=!0,an=re("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){on=!1})),It({target:"Array",proto:!0,forced:on||!an},{findIndex:function(t){return rn(this,t,arguments.length>1?arguments[1]:void 0)}}),ye("findIndex");var un=function(t,e,n,r){try{return r?e(C(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&C(o.call(t)),e}},sn={},cn=Pt("iterator"),fn=Array.prototype,ln=function(t){return void 0!==t&&(sn.Array===t||fn[cn]===t)},hn={};hn[Pt("toStringTag")]="z";var pn="[object z]"===String(hn),dn=Pt("toStringTag"),gn="Arguments"==l(function(){return arguments}()),mn=pn?l:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),dn))?n:gn?l(e):"Object"==(r=l(e))&&"function"==typeof e.callee?"Arguments":r},vn=Pt("iterator"),yn=function(t){if(null!=t)return t[vn]||t["@@iterator"]||sn[mn(t)]},bn=Pt("iterator"),wn=!1;try{var _n=0,Tn={next:function(){return{done:!!_n++}},return:function(){wn=!0}};Tn[bn]=function(){return this},Array.from(Tn,(function(){throw 2}))}catch(t){}var xn=function(t,e){if(!e&&!wn)return!1;var n=!1;try{var r={};r[bn]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Sn=!xn((function(t){Array.from(t)}));It({target:"Array",stat:!0,forced:Sn},{from:function(t){var e,n,r,o,i,a,u=kt(t),s="function"==typeof this?this:Array,c=arguments.length,f=c>1?arguments[1]:void 0,l=void 0!==f,h=yn(u),p=0;if(l&&(f=Ut(f,c>2?arguments[2]:void 0,2)),null==h||s==Array&&ln(h))for(n=new s(e=ct(u.length));e>p;p++)a=l?f(u[p],p):u[p],Me(n,p,a);else for(i=(o=h.call(u)).next,n=new s;!(r=i.call(o)).done;p++)a=l?un(o,f,[r.value,p],!0):r.value,Me(n,p,a);return n.length=p,n}});var An,Cn,Fn,En=!o((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Dn=z("IE_PROTO"),Mn=Object.prototype,In=En?Object.getPrototypeOf:function(t){return t=kt(t),b(t,Dn)?t[Dn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Mn:null},On=Pt("iterator"),Un=!1;[].keys&&("next"in(Fn=[].keys())?(Cn=In(In(Fn)))!==Object.prototype&&(An=Cn):Un=!0),null==An&&(An={}),b(An,On)||D(An,On,(function(){return this}));var kn={IteratorPrototype:An,BUGGY_SAFARI_ITERATORS:Un},Nn=E.f,jn=Pt("toStringTag"),Ln=function(t,e,n){t&&!b(t=n?t:t.prototype,jn)&&Nn(t,jn,{configurable:!0,value:e})},Rn=kn.IteratorPrototype,Yn=function(){return this},Hn=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return C(n),function(t){if(!m(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Pn=kn.IteratorPrototype,Bn=kn.BUGGY_SAFARI_ITERATORS,Vn=Pt("iterator"),zn=function(){return this},Wn=function(t,e,n,r,o,i,a){!function(t,e,n){var r=e+" Iterator";t.prototype=ge(Rn,{next:c(1,n)}),Ln(t,r,!1),sn[r]=Yn}(n,e,r);var u,s,f,l=function(t){if(t===o&&m)return m;if(!Bn&&t in d)return d[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",p=!1,d=t.prototype,g=d[Vn]||d["@@iterator"]||o&&d[o],m=!Bn&&g||l(o),v="Array"==e&&d.entries||g;if(v&&(u=In(v.call(new t)),Pn!==Object.prototype&&u.next&&(In(u)!==Pn&&(Hn?Hn(u,Pn):"function"!=typeof u[Vn]&&D(u,Vn,zn)),Ln(u,h,!0))),"values"==o&&g&&"values"!==g.name&&(p=!0,m=function(){return g.call(this)}),d[Vn]!==m&&D(d,Vn,m),sn[e]=m,o)if(s={values:l("values"),keys:i?m:l("keys"),entries:l("entries")},a)for(f in s)!Bn&&!p&&f in d||et(d,f,s[f]);else It({target:e,proto:!0,forced:Bn||p},s);return s},Gn=tt.set,qn=tt.getterFor("Array Iterator"),Qn=Wn(Array,"Array",(function(t,e){Gn(this,{type:"Array Iterator",target:g(t),index:0,kind:e})}),(function(){var t=qn(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");sn.Arguments=sn.Array,ye("keys"),ye("values"),ye("entries");var Zn=[],Xn=Zn.sort,$n=o((function(){Zn.sort(void 0)})),Jn=o((function(){Zn.sort(null)})),Kn=_e("sort");It({target:"Array",proto:!0,forced:$n||!Jn||!Kn},{sort:function(t){return void 0===t?Xn.call(kt(this)):Xn.call(kt(this),Ot(t))}});var tr=function(t,e,n){var r,o;return Hn&&"function"==typeof(r=e.constructor)&&r!==n&&m(o=r.prototype)&&o!==n.prototype&&Hn(t,o),t},er="\t\n\v\f\r                　\u2028\u2029\ufeff",nr="["+er+"]",rr=RegExp("^"+nr+nr+"*"),or=RegExp(nr+nr+"*$"),ir=function(t){return function(e){var n=String(d(e));return 1&t&&(n=n.replace(rr,"")),2&t&&(n=n.replace(or,"")),n}},ar={start:ir(1),end:ir(2),trim:ir(3)},ur=bt.f,sr=A.f,cr=E.f,fr=ar.trim,lr=r.Number,hr=lr.prototype,pr="Number"==l(ge(hr)),dr=function(t){var e,n,r,o,i,a,u,s,c=v(t,!1);if("string"==typeof c&&c.length>2)if(43===(e=(c=fr(c)).charCodeAt(0))||45===e){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+c}for(a=(i=c.slice(2)).length,u=0;u<a;u++)if((s=i.charCodeAt(u))<48||s>o)return NaN;return parseInt(i,r)}return+c};if(Dt("Number",!lr(" 0o1")||!lr("0b1")||lr("+0x1"))){for(var gr,mr=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof mr&&(pr?o((function(){hr.valueOf.call(n)})):"Number"!=l(n))?tr(new lr(dr(e)),n,mr):dr(e)},vr=i?ur(lr):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),yr=0;vr.length>yr;yr++)b(lr,gr=vr[yr])&&!b(mr,gr)&&cr(mr,gr,sr(lr,gr));mr.prototype=hr,hr.constructor=mr,et(r,"Number",mr)}var br=pn?{}.toString:function(){return"[object "+mn(this)+"]"};pn||et(Object.prototype,"toString",br,{unsafe:!0});var wr=ar.trim,_r=r.parseFloat,Tr=1/_r(er+"-0")!=-1/0?function(t){var e=wr(String(t)),n=_r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:_r;It({global:!0,forced:parseFloat!=Tr},{parseFloat:Tr});var xr=function(){var t=C(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Sr=RegExp.prototype,Ar=Sr.toString,Cr=o((function(){return"/a/b"!=Ar.call({source:"a",flags:"b"})})),Fr="toString"!=Ar.name;(Cr||Fr)&&et(RegExp.prototype,"toString",(function(){var t=C(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in Sr)?xr.call(t):n)}),{unsafe:!0});var Er=!o((function(){return Object.isExtensible(Object.preventExtensions({}))})),Dr=e((function(t){var e=E.f,n=B("meta"),r=0,o=Object.isExtensible||function(){return!0},i=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!m(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!b(t,n)){if(!o(t))return"F";if(!e)return"E";i(t)}return t[n].objectID},getWeakData:function(t,e){if(!b(t,n)){if(!o(t))return!0;if(!e)return!1;i(t)}return t[n].weakData},onFreeze:function(t){return Er&&a.REQUIRED&&o(t)&&!b(t,n)&&i(t),t}};W[n]=!0})),Mr=(Dr.REQUIRED,Dr.fastKey,Dr.getWeakData,Dr.onFreeze,e((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,r,o,i){var a,u,s,c,f,l,h,p=Ut(n,r,o?2:1);if(i)a=t;else{if("function"!=typeof(u=yn(t)))throw TypeError("Target is not iterable");if(ln(u)){for(s=0,c=ct(t.length);c>s;s++)if((f=o?p(C(h=t[s])[0],h[1]):p(t[s]))&&f instanceof e)return f;return new e(!1)}a=u.call(t)}for(l=a.next;!(h=l.call(a)).done;)if("object"==typeof(f=un(a,p,h.value,o))&&f&&f instanceof e)return f;return new e(!1)}).stop=function(t){return new e(!0,t)}}))),Ir=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},Or=function(t,e,n){for(var r in e)et(t,r,e[r],n);return t},Ur=Pt("species"),kr=function(t){var e=ot(t),n=E.f;i&&e&&!e[Ur]&&n(e,Ur,{configurable:!0,get:function(){return this}})},Nr=E.f,jr=Dr.fastKey,Lr=tt.set,Rr=tt.getterFor,Yr=(function(t,e,n){var i=-1!==t.indexOf("Map"),a=-1!==t.indexOf("Weak"),u=i?"set":"add",s=r[t],c=s&&s.prototype,f=s,l={},h=function(t){var e=c[t];et(c,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(a&&!m(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return a&&!m(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(a&&!m(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(Dt(t,"function"!=typeof s||!(a||c.forEach&&!o((function(){(new s).entries().next()})))))f=n.getConstructor(e,t,i,u),Dr.REQUIRED=!0;else if(Dt(t,!0)){var p=new f,d=p[u](a?{}:-0,1)!=p,g=o((function(){p.has(1)})),v=xn((function(t){new s(t)})),y=!a&&o((function(){for(var t=new s,e=5;e--;)t[u](e,e);return!t.has(-0)}));v||((f=e((function(e,n){Ir(e,f,t);var r=tr(new s,e,f);return null!=n&&Mr(n,r[u],r,i),r}))).prototype=c,c.constructor=f),(g||y)&&(h("delete"),h("has"),i&&h("get")),(y||d)&&h(u),a&&c.clear&&delete c.clear}l[t]=f,It({global:!0,forced:f!=s},l),Ln(f,t),a||n.setStrong(f,t,i)}("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,n,r){var o=t((function(t,a){Ir(t,o,e),Lr(t,{type:e,index:ge(null),first:void 0,last:void 0,size:0}),i||(t.size=0),null!=a&&Mr(a,t[r],t,n)})),a=Rr(e),u=function(t,e,n){var r,o,u=a(t),c=s(t,e);return c?c.value=n:(u.last=c={index:o=jr(e,!0),key:e,value:n,previous:r=u.last,next:void 0,removed:!1},u.first||(u.first=c),r&&(r.next=c),i?u.size++:t.size++,"F"!==o&&(u.index[o]=c)),t},s=function(t,e){var n,r=a(t),o=jr(e);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Or(o.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,i?t.size=0:this.size=0},delete:function(t){var e=a(this),n=s(this,t);if(n){var r=n.next,o=n.previous;delete e.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),e.first==n&&(e.first=r),e.last==n&&(e.last=o),i?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=a(this),r=Ut(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),Or(o.prototype,n?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return u(this,0===t?0:t,e)}}:{add:function(t){return u(this,t=0===t?0:t,t)}}),i&&Nr(o.prototype,"size",{get:function(){return a(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",o=Rr(e),i=Rr(r);Wn(t,e,(function(t,e){Lr(this,{type:r,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),kr(e)}}),function(t){return function(e,n){var r,o,i=String(d(e)),a=ut(n),u=i.length;return a<0||a>=u?t?"":void 0:(r=i.charCodeAt(a))<55296||r>56319||a+1===u||(o=i.charCodeAt(a+1))<56320||o>57343?t?i.charAt(a):r:t?i.slice(a,a+2):o-56320+(r-55296<<10)+65536}}),Hr={codeAt:Yr(!1),charAt:Yr(!0)}.charAt,Pr=tt.set,Br=tt.getterFor("String Iterator");Wn(String,"String",(function(t){Pr(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=Br(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Hr(n,r),e.index+=t.length,{value:t,done:!1})}));var Vr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},zr=Pt("iterator"),Wr=Pt("toStringTag"),Gr=Qn.values;for(var qr in Vr){var Qr=r[qr],Zr=Qr&&Qr.prototype;if(Zr){if(Zr[zr]!==Gr)try{D(Zr,zr,Gr)}catch(t){Zr[zr]=Gr}if(Zr[Wr]||D(Zr,Wr,qr),Vr[qr])for(var Xr in Qn)if(Zr[Xr]!==Qn[Xr])try{D(Zr,Xr,Qn[Xr])}catch(t){Zr[Xr]=Qn[Xr]}}}var $r=Pt("isConcatSpreadable"),Jr=$t>=51||!o((function(){var t=[];return t[$r]=!1,t.concat()[0]!==t})),Kr=Kt("concat"),to=function(t){if(!m(t))return!1;var e=t[$r];return void 0!==e?!!e:Nt(t)};function eo(t,e,n,r,o){var i=n||0,a=r||t.length,u=o||i+1,s=e;for(s||(s=function(t,e){return t-e}),i===u&&++u;u<a;++u){var c=i,f=u,l=t[f];do{var h=c+(f-c>>1);s(l,t[h])<0?f=h:c=h+1}while(c<f);for(var p=u;p>c;--p)t[p]=t[p-1];t[c]=l}}It({target:"Array",proto:!0,forced:!Jr||!Kr},{concat:function(t){var e,n,r,o,i,a=kt(this),u=Vt(a,0),s=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?a:arguments[e],to(i)){if(s+(o=ct(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,s++)n in i&&Me(u,s,i[n])}else{if(s>=9007199254740991)throw TypeError("Maximum allowed index exceeded");Me(u,s++,i)}return u.length=s,u}});function no(t,e,n,r){var o=n+1;if(o===r)return 1;if(e(t[o++],t[n])<0){for(;o<r&&e(t[o],t[o-1])<0;)o++;!function(t,e,n){var r=n,o=e;for(--r;o<r;){var i=t[o];t[o++]=t[r],t[r--]=i}}(t,n,o)}else for(;o<r&&e(t[o],t[o-1])>=0;)o++;return o-n}function ro(t,e,n,r,o,i){var a,u,s=0,c=0,f=1;if(i(t,e[n+o])>0){for(c=r-o;f<c&&i(t,e[n+o+f])>0;)s=f,(f=1+(f<<1))<=0&&(f=c);f>c&&(f=c),s+=o,f+=o}else{for(c=o+1;f<c&&i(t,e[n+o-f])<=0;)s=f,(f=1+(f<<1))<=0&&(f=c);f>c&&(f=c),a=s,s=o-f,f=o-a}for(s++;s<f;)i(t,e[n+(u=s+(f-s>>>1))])>0?s=u+1:f=u;return f}function oo(t,e,n,r,o,i){var a,u,s=0,c=0,f=1;if(i(t,e[n+o])<0){for(c=o+1;f<c&&i(t,e[n+o-f])<0;)s=f,(f=1+(f<<1))<=0&&(f=c);f>c&&(f=c),a=s,s=o-f,f=o-a}else{for(c=r-o;f<c&&i(t,e[n+o+f])>=0;)s=f,(f=1+(f<<1))<=0&&(f=c);f>c&&(f=c),s+=o,f+=o}for(s++;s<f;)i(t,e[n+(u=s+(f-s>>>1))])<0?f=u:s=u+1;return f}var io=function(){function t(e,n){We(this,t),this.arr=e,this.comparer=n,this.length=e.length,this.tmpStorageLen=this.length<512?this.length>>>1:256,this.tmp=new Array(this.tmpStorageLen),this.runBaseArr=new Array(40),this.runLenArr=new Array(40),this.minGallop=7,this.stackSize=0}return qe(t,[{key:"pushRun",value:function(t,e){this.runBaseArr[this.stackSize]=t,this.runLenArr[this.stackSize]=e,this.stackSize++}},{key:"mergeCollapse",value:function(){for(var t;this.stackSize>1;){if((t=this.stackSize-2)>=1&&this.runLenArr[t-1]<=this.runLenArr[t]+this.runLenArr[t+1]||t>=2&&this.runLenArr[t-2]<=this.runLenArr[t]+this.runLenArr[t-1])this.runLenArr[t-1]<this.runLenArr[t+1]&&t--;else if(this.runLenArr[t]>this.runLenArr[t+1])break;this.mergeAt(t)}}},{key:"mergeForceCollapse",value:function(){for(var t;this.stackSize>1;)(t=this.stackSize-2)>0&&this.runLenArr[t-1]<this.runLenArr[t+1]&&t--,this.mergeAt(t)}},{key:"mergeAt",value:function(t){var e,n=this.comparer,r=this.arr,o=this.runBaseArr[t],i=this.runLenArr[t],a=this.runBaseArr[t+1],u=this.runLenArr[t+1];this.runLenArr[t]=i+u,t===this.stackSize-3&&(this.runBaseArr[t+1]=this.runBaseArr[t+2],this.runLenArr[t+1]=this.runLenArr[t+2]),this.stackSize--,o+=e=oo(r[a],r,o,i,0,n),0!==(i-=e)&&0!==(u=ro(r[o+i-1],r,a,u,u-1,n))&&(i<=u?this.mergeLo(o,i,a,u):this.mergeHi(o,i,a,u))}},{key:"mergeLo",value:function(t,e,n,r){var o,i,a,u,s=0,c=0,f=n,l=t,h=e,p=r;for(s=0;s<h;s++)this.tmp[s]=this.arr[t+s];if(this.arr[l++]=this.arr[f++],0!=--p)if(1!==h){for(o=this.minGallop;;){i=0,a=0,u=!1;do{if(this.comparer(this.arr[f],this.tmp[c])<0){if(this.arr[l++]=this.arr[f++],a++,i=0,0==--p){u=!0;break}}else if(this.arr[l++]=this.tmp[c++],i++,a=0,1==--h){u=!0;break}}while((i|a)<o);if(u)break;do{if(0!==(i=oo(this.arr[f],this.tmp,c,h,0,this.comparer))){for(s=0;s<i;s++)this.arr[l+s]=this.tmp[c+s];if(l+=i,c+=i,(h-=i)<=1){u=!0;break}}if(this.arr[l++]=this.arr[f++],0==--p){u=!0;break}if(0!==(a=ro(this.tmp[c],this.arr,f,p,0,this.comparer))){for(s=0;s<a;s++)this.arr[l+s]=this.arr[f+s];if(l+=a,f+=a,0===(p-=a)){u=!0;break}}if(this.arr[l++]=this.tmp[c++],1==--h){u=!0;break}o--}while(i>=7||a>=7);if(u)break;o<0&&(o=0),o+=2}if(this.minGallop=o,o<1&&(this.minGallop=1),1===h){for(s=0;s<p;s++)this.arr[l+s]=this.arr[f+s];this.arr[l+p]=this.tmp[c]}else for(s=0;s<h;s++)this.arr[l+s]=this.tmp[c+s]}else{for(s=0;s<p;s++)this.arr[l+s]=this.arr[f+s];this.arr[l+p]=this.tmp[c]}else for(s=0;s<h;s++)this.arr[l+s]=this.tmp[c+s]}},{key:"mergeHi",value:function(t,e,n,r){var o,i,a,u,s=0,c=e,f=r,l=t+c-1,h=f-1,p=n+f-1,d=0,g=0;for(s=0;s<f;s++)this.tmp[s]=this.arr[n+s];if(this.arr[p--]=this.arr[l--],0!=--c)if(1!==f){for(o=this.minGallop;;){i=0,a=0,u=!1;do{if(this.comparer(this.tmp[h],this.arr[l])<0){if(this.arr[p--]=this.arr[l--],i++,a=0,0==--c){u=!0;break}}else if(this.arr[p--]=this.tmp[h--],a++,i=0,1==--f){u=!0;break}}while((i|a)<o);if(u)break;do{if(0!==(i=c-oo(this.tmp[h],this.arr,t,c,c-1,this.comparer))){for(c-=i,g=(p-=i)+1,d=(l-=i)+1,s=i-1;s>=0;s--)this.arr[g+s]=this.arr[d+s];if(0===c){u=!0;break}}if(this.arr[p--]=this.tmp[h--],1==--f){u=!0;break}if(0!==(a=f-ro(this.arr[l],this.tmp,0,f,f-1,this.comparer))){for(f-=a,g=(p-=a)+1,d=(h-=a)+1,s=0;s<a;s++)this.arr[g+s]=this.tmp[d+s];if(f<=1){u=!0;break}}if(this.arr[p--]=this.arr[l--],0==--c){u=!0;break}o--}while(i>=7||a>=7);if(u)break;o<0&&(o=0),o+=2}if(this.minGallop=o,o<1&&(this.minGallop=1),1===f){for(g=(p-=c)+1,d=(l-=c)+1,s=c-1;s>=0;s--)this.arr[g+s]=this.arr[d+s];this.arr[p]=this.tmp[h]}else for(d=p-(f-1),s=0;s<f;s++)this.arr[d+s]=this.tmp[s]}else{for(g=(p-=c)+1,d=(l-=c)+1,s=c-1;s>=0;s--)this.arr[g+s]=this.arr[d+s];this.arr[p]=this.tmp[h]}else for(d=p-(f-1),s=0;s<f;s++)this.arr[d+s]=this.tmp[s]}}]),t}();function ao(t,e,n,r){var o,i,a,u,s,c=n,f=r,l=e;if(t.constructor!==Array)throw new TypeError("Sorting can only be applied on arrays.");if(c=c||0,l||(l=function(t,e){return t-e}),!((o=(f=f||t.length)-c)<2))if(o<64)eo(t,l,c,f,c+(i=no(t,l,c,f)));else{a=function(t){for(var e=0,n=t;n>=64;)e|=1&n,n>>=1;return n+e}(o),u=new io(t,l);do{(i=no(t,l,c,c+o))<a&&(eo(t,l,c,c+(s=o<=a?o:a),c+i),i=s),u.pushRun(c,i),u.mergeCollapse(),o-=i,c+=i}while(0!==o);u.mergeForceCollapse()}}var uo={enableUTC:!1};function so(t){if(!t)throw new Error("configName is missing");return uo[t]}var co,fo={String:"string",Number:"number",DateTime:"datetime",Interval:"interval"};!function(t){t.px="px",t.em="em",t.rem="rem",t.pt="pt",t.percentage="%"}(co||(co={}));var lo,ho={Millisecond:{name:"Millisecond",ms:1},Second:{name:"Second",ms:1e3},Minute:{name:"Minute",ms:6e4},Hour:{name:"Hour",ms:36e5},Day:{name:"Day",ms:864e5},Week:{name:"Week",ms:6048e5},Month:{name:"Month",ms:2592e6},Quarter:{name:"Quarter",ms:78894e5},Year:{name:"Year",ms:315576e5}},po={Sunday:{name:"Sunday",id:0},Monday:{name:"Monday",id:1},Tuesday:{name:"Tuesday",id:2},Wednesday:{name:"Wednesday",id:3},Thursday:{name:"Thursday",id:4},Friday:{name:"Friday",id:5},Saturday:{name:"Saturday",id:6}},go=function(t){return"number"==typeof t&&!isNaN(t-t)},mo=function(t,e){return null==t?e===t?0:1:go(e)?t-e:isNaN(t)&&isNaN(e)?0:-1},vo=function(t,e){return null==t?e===t?0:1:go(e)?go(t)?t-e:-1:t===e?0:t<e?-1:1},yo={"-":"",_:" ",0:"0"},bo=function(){function t(t,e){this._specifier=t,this._formats=e}return t.prototype.format=function(t){var e,n,r,o=[],i=t,a=-1,u=0,s=this._specifier,c=s.length;for(i instanceof Date||(i=new Date(+i));++a<c;)37===s.charCodeAt(a)&&(o.push(s.slice(u,a)),e=s.charAt(++a),null==(n=yo[e])?n="e"===e?" ":"0":e=s.charAt(++a),(r=this._formats[e])&&(e=r(i,n)),o.push(e),u=a+1);return o.push(s.slice(u,a)),o.join("")},t.prototype.toString=function(){return this._specifier},t}(),wo=new Date,_o=new Date,To=function(t){return null==t},xo=function(){function t(t,e,n,r,o){this._name=t,this._floori=e,this._offseti=n,this._count=r,this._field=o}return t.prototype.name=function(){return this._name},t.prototype.floor=function(t){var e=new Date(Number(t));return this._floori(e),e},t.prototype.ceil=function(t){var e=new Date(t-1);return this._floori(e),this._offseti(e,1),this._floori(e),e},t.prototype.round=function(t){var e=this.floor(t),n=this.ceil(t);return t-e<n-t?e:n},t.prototype.offset=function(t,e){var n=new Date(Number(t));return this._offseti(n,To(e)?1:Math.floor(e)),n},t.prototype.range=function(t,e,n){var r,o=[],i=this.ceil(t),a=To(n)?1:Math.floor(n);if(!(i<e&&a>0))return o;do{r=new Date(Number(i)),o.push(r),this._offseti(i,a),this._floori(i)}while(r<i&&i<e);return o},t.prototype.filter=function(e){var n=this;return new t(this.name(),(function(t){if(!Number.isNaN(Number(t)))for(;n._floori(t),!e(t);)t.setTime(t-1)}),(function(t,r){var o=r;if(!Number.isNaN(Number(t)))if(o<0)for(;++o<=0;)do{n._offseti(t,-1)}while(!e(t));else for(;--o>=0;)do{n._offseti(t,1)}while(!e(t))}))},t.prototype.count=function(t,e){var n=0;return this._count&&(wo.setTime(Number(t)),_o.setTime(Number(e)),this._floori(wo),this._floori(_o),n=Math.floor(this._count(wo,_o))),n},t.prototype.every=function(t){var e=this,n=Math.floor(t);return this._count&&Number.isFinite(n)&&n>0?n>1?this.filter(this._field?function(t){return e._field(t)%n==0}:function(t){return e.count(0,t)%n==0}):this:null},t}(),So=(lo=function(t,e){return(lo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}lo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ao=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return So(e,t),e.prototype.every=function(t){var e=Math.floor(t);return this.count&&Number.isFinite(e)&&e>0?e>1?new xo("millisecond",(function(t){return t.setTime(Math.floor(t/e)*e)}),(function(t,n){return t.setTime(Number(t)+n*e)}),(function(t,n){return(n-t)/e})):this:null},e}(xo))("millisecond",(function(){}),(function(t,e){return t.setTime(Number(t)+Number(e))}),(function(t,e){return e-t})),Co=new xo("second",(function(t){return t.setTime(1e3*Math.floor(t/1e3))}),(function(t,e){return t.setTime(Number(t)+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()})),Fo=new xo("minute",(function(t){return t.setTime(6e4*Math.floor(t/6e4))}),(function(t,e){return t.setTime(Number(t)+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()})),Eo=new xo("hour",(function(t){var e=6e4*t.getTimezoneOffset()%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((Number(t)-e)/36e5)+e)}),(function(t,e){return t.setTime(Number(t)+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()})),Do=new xo("day",(function(t){return t.setHours(0,0,0,0)}),(function(t,e){return t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1})),Mo=function(t,e){return new xo(e,(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){return t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))},Io=Mo(0,"sunday"),Oo=Mo(1,"monday"),Uo=Mo(2,"tuesday"),ko=Mo(3,"wednesday"),No=Mo(4,"thursday"),jo=Mo(5,"friday"),Lo=Mo(6,"saturday"),Ro=new xo("quarter",(function(t){t.setMonth(t.getMonth()-(t.getMonth()+3)%3,1),t.setHours(0,0,0,0)}),(function(t,e){return t.setMonth(t.getMonth()+3*e)}),(function(t,e){return(e.getMonth()-(e.getMonth()+3)%3-(t.getMonth()-(t.getMonth()+3)%3))/3+4*(e.getFullYear()-t.getFullYear())}),(function(t){return Math.floor(t.getMonth()/3)})),Yo=new xo("month",(function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){return t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Ho=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Po=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ho(e,t),e.prototype.every=function(t){var e=Math.floor(t);return this.count&&Number.isFinite(e)&&e>0?new xo("year",(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){return t.setFullYear(t.getFullYear()+n*e)})):null},e}(xo))("year",(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){return t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})),Bo=new xo("minute",(function(t){return t.setUTCSeconds(0,0)}),(function(t,e){return t.setTime(Number(t)+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()})),Vo=new xo("hour",(function(t){return t.setUTCMinutes(0,0,0)}),(function(t,e){return t.setTime(Number(t)+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()})),zo=new xo("day",(function(t){return t.setUTCHours(0,0,0,0)}),(function(t,e){return t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1})),Wo=function(t,e){return new xo(e,(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){return t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))},Go=Wo(0,"sunday"),qo=Wo(1,"monday"),Qo=Wo(2,"tuesday"),Zo=Wo(3,"wednesday"),Xo=Wo(4,"thursday"),$o=Wo(5,"friday"),Jo=Wo(6,"saturday"),Ko=new xo("quarter",(function(t){t.setUTCMonth(t.getUTCMonth()-(t.getUTCMonth()+3)%3,1),t.setUTCHours(0,0,0,0)}),(function(t,e){return t.setUTCMonth(t.getUTCMonth()+3*e)}),(function(t,e){return(e.getUTCMonth()-(e.getUTCMonth()+3)%3-(t.getUTCMonth()-(t.getUTCMonth()+3)%3))/3+4*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return Math.floor(t.getMonth()/3)})),ti=new xo("month",(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){return t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),ei=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ni=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ei(e,t),e.prototype.every=function(t){var e=t;return isFinite(e=Math.floor(e))&&e>0?new xo("year",(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){return t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null},e}(xo))("year",(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){return t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})),ri=function(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}},oi=function(t){if(t.y>=0&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))},ii=function(){function t(t,e,n){this._specifier=t,this._parses=e,this._newDate=n}return t.prototype.parseSpecifier=function(t,e,n){for(var r,o,i=0,a=this._specifier.length,u=e.length,s=n;i<a;){if(s>=u)return-1;if(37===(r=this._specifier.charCodeAt(i++))){if(r=this._specifier.charAt(i++),!(o=this._parses[r in yo?this._specifier.charAt(i++):r])||(s=o(t,e,s))<0)return-1}else if(r!==e.charCodeAt(s++))return-1}return s},t.prototype.parse=function(t){var e,n,r=ri(1900),o=t;if(o+="",this.parseSpecifier(r,o,0)!==o.length)return null;if("Q"in r)return new Date(r.Q);if("p"in r&&(r.H=r.H%12+12*r.p),"V"in r){if(r.V<1||r.V>53)return null;"w"in r||(r.w=1),"Z"in r?(n=(e=oi(ri(r.y))).getUTCDay(),e=n>4||0===n?qo.ceil(e):qo.floor(e),e=zo.offset(e,7*(r.V-1)),r.y=e.getUTCFullYear(),r.m=e.getUTCMonth(),r.d=e.getUTCDate()+(r.w+6)%7):(n=(e=this._newDate(ri(r.y))).getDay(),e=n>4||0===n?Oo.ceil(e):Oo.floor(e),e=Do.offset(e,7*(r.V-1)),r.y=e.getFullYear(),r.m=e.getMonth(),r.d=e.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?oi(ri(r.y)).getUTCDay():this._newDate(ri(r.y)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,oi(r)):this._newDate(r)},t.prototype.toString=function(){return this._specifier},t}(),ai=/^\s*\d+/,ui=/^\s*Q\d+/,si=/^%/,ci=/[\\^$*+?|[\]().{}]/g,fi=function(t,e,n){var r=t<0?"-":"",o=(r?-t:t)+"",i=o.length;return r+(i<n?new Array(n-i+1).join(e)+o:o)},li=function(t){return t.replace(ci,"\\$&")},hi=function(t){return new RegExp("^(?:"+t.map(li).join("|")+")","i")},pi=function(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e},di=function(t,e,n){var r=ai.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1},gi=function(t,e,n){var r=ai.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1},mi=function(t,e,n){var r=ai.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1},vi=function(t,e,n){var r=ai.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1},yi=function(t,e,n){var r=ai.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1},bi=function(t,e,n){var r=ui.exec(e.slice(n,n+2));return r?(t.m=3*(r[0][1]-1),n+r[0].length):-1},wi=function(t,e,n){var r=ai.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1},_i=function(t,e,n){var r=ai.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1},Ti=function(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1},xi=function(t,e,n){var r=ai.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1},Si=function(t,e,n){var r=ai.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1},Ai=function(t,e,n){var r=ai.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1},Ci=function(t,e,n){var r=ai.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1},Fi=function(t,e,n){var r=ai.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1},Ei=function(t,e,n){var r=ai.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1},Di=function(t,e,n){var r=ai.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1},Mi=function(t,e,n){var r=ai.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1},Ii=function(t,e,n){var r=si.exec(e.slice(n,n+1));return r?n+r[0].length:-1},Oi=function(t,e,n){var r=ai.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1},Ui=function(t,e,n){var r=ai.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1},ki=function(t,e){return fi(t.getDate(),e,2)},Ni=function(t,e){return fi(t.getHours(),e,2)},ji=function(t,e){return fi(t.getHours()%12||12,e,2)},Li=function(t,e){return fi(1+Do.count(Po.floor(t),t),e,3)},Ri=function(t,e){return fi(t.getMilliseconds(),e,3)},Yi=function(t,e){return Ri(t,e)+"000"},Hi=function(t,e){return fi(t.getMonth()+1,e,2)},Pi=function(t,e){return fi(t.getMinutes(),e,2)},Bi=function(t,e){return fi(t.getSeconds(),e,2)},Vi=function(t,e){return"Q"+Math.ceil((t.getMonth()+1)/3)},zi=function(t){var e=t.getDay();return 0===e?7:e},Wi=function(t,e){return fi(Io.count(Po.floor(t),t),e,2)},Gi=function(t,e){var n=t,r=n.getDay();return n=r>=4||0===r?No.floor(n):No.ceil(n),fi(No.count(Po.floor(n),n)+(4===Po.floor(n).getDay()),e,2)},qi=function(t){return t.getDay()},Qi=function(t,e){return fi(Oo.count(Po.floor(t),t),e,2)},Zi=function(t,e){return fi(t.getFullYear()%100,e,2)},Xi=function(t,e){return fi(t.getFullYear()%1e4,e,4)},$i=function(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+fi(e/60|0,"0",2)+fi(e%60,"0",2)},Ji=function(t,e){return fi(t.getUTCDate(),e,2)},Ki=function(t,e){return fi(t.getUTCHours(),e,2)},ta=function(t,e){return fi(t.getUTCHours()%12||12,e,2)},ea=function(t,e){return fi(1+zo.count(ni.floor(t),t),e,3)},na=function(t,e){return fi(t.getUTCMilliseconds(),e,3)},ra=function(t,e){return na(t,e)+"000"},oa=function(t,e){return fi(t.getUTCMonth()+1,e,2)},ia=function(t,e){return fi(t.getUTCMinutes(),e,2)},aa=function(t,e){return fi(t.getUTCSeconds(),e,2)},ua=function(t,e){return"Q"+Math.ceil((t.getUTCMonth()+1)/3)},sa=function(t){var e=t.getUTCDay();return 0===e?7:e},ca=function(t,e){return fi(Go.count(ni.floor(t),t),e,2)},fa=function(t,e){var n=t,r=n.getUTCDay();return n=r>=4||0===r?Xo.floor(n):Xo.ceil(n),fi(Xo.count(ni.floor(n),n)+(4===ni.floor(n).getUTCDay()),e,2)},la=function(t){return t.getUTCDay()},ha=function(t,e){return fi(qo.count(ni.floor(t),t),e,2)},pa=function(t,e){return fi(t.getUTCFullYear()%100,e,2)},da=function(t,e){return fi(t.getUTCFullYear()%1e4,e,4)},ga=function(){return"+0000"},ma=function(){return"%"},va=function(t){return+t},ya=function(t){return Math.floor(+t/1e3)},ba=new(function(){function t(t){var e=this,n=t.dateTime,r=t.date,o=t.time,i=t.periods,a=t.days,u=t.shortDays,s=t.months,c=t.shortMonths,f=hi(i),l=pi(i),h=hi(a),p=pi(a),d=hi(u),g=pi(u),m=hi(s),v=pi(s),y=hi(c),b=pi(c);this._formats={a:function(t){return u[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return s[t.getMonth()]},d:ki,e:ki,f:Yi,H:Ni,I:ji,j:Li,L:Ri,m:Hi,M:Pi,p:function(t){return i[+(t.getHours()>=12)]},q:Vi,Q:va,s:ya,S:Bi,u:zi,U:Wi,V:Gi,w:qi,W:Qi,y:Zi,Y:Xi,Z:$i,"%":ma},this._utcFormats={a:function(t){return u[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},d:Ji,e:Ji,f:ra,H:Ki,I:ta,j:ea,L:na,m:oa,M:ia,p:function(t){return i[+(t.getUTCHours()>=12)]},q:ua,Q:va,s:ya,S:aa,u:sa,U:ca,V:fa,w:la,W:ha,y:pa,Y:da,Z:ga,"%":ma},this._parses={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=g[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=b[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:null,d:Si,e:Si,f:Mi,H:Ci,I:Ci,j:Ai,L:Di,m:xi,M:Fi,p:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1},Q:Oi,q:bi,s:Ui,S:Ei,u:gi,U:mi,V:vi,w:di,W:yi,x:null,X:null,y:_i,Y:wi,Z:Ti,"%":Ii},this._formats.x=function(t){return new bo(r,e._formats).format(t)},this._formats.X=function(t){return new bo(o,e._formats).format(t)},this._formats.c=function(t){return new bo(n,e._formats).format(t)},this._utcFormats.x=function(t){return new bo(r,e._utcFormats).format(t)},this._utcFormats.X=function(t){return new bo(o,e._utcFormats).format(t)},this._utcFormats.c=function(t){return new bo(n,e._utcFormats).format(t)},this._parses.c=function(t,r,o){return new ii(n,e._parses).parseSpecifier(t,r,o)},this._parses.x=function(t,n,o){return new ii(r,e._parses).parseSpecifier(t,n,o)},this._parses.X=function(t,n,r){return new ii(o,e._parses).parseSpecifier(t,n,r)}}return t.prototype.formatter=function(t){return void 0===t&&(t=""),new bo(t.toString(),this._formats)},t.prototype.utcFormatter=function(t){return void 0===t&&(t=""),new bo(t.toString(),this._utcFormats)},t.prototype.parser=function(t){var e=t;return new ii(e+="",this._parses,(function(t){if(t.y>=0&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}))},t.prototype.utcParser=function(t){var e=t;return new ii(e+="",this._parses,oi)},t}())({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wa(t,e){if(!e||!t)return null;for(var n=0;n<e.length;n++)if(e[n]&&e[n].name===t)return n;return-1}function _a(t,e,n){var r,o=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=wa(t,n);if(null===a||-1===a)return null;if(e&&e.length>0)for(var u=0;u<e.length;u++)r=n[a].type===fo.Interval?e[u][a]?e[u][a].start:null:e[u][a],go(r)&&r<o&&(o=r),r=n[a].type===fo.Interval?e[u][a]?e[u][a].end:null:e[u][a],go(r)&&r>i&&(i=r);return{min:o,max:i}}function Ta(t,e,n){var r,o=wa(t,n),i=[];if(null===o||-1===o)return[];for(var a=0;a<e.length;a++)i.push(e[a][o]);return e&&e.length>0?1===(r=Array.from(new Set(i))).length&&void 0===r[0]?[]:r:[]}function xa(t,e,n){var r;if(t.type===fo.DateTime)return(r=n[t.name]?n[t.name].parse(e):new Date(e))&&(r=+r),go(r)?r:null;if(t.type===fo.Number){if(go(e))return e;var o=parseFloat(e);return go(o)?o:null}return null!=e?e.toString():e}function Sa(t){for(var e={},n=0;n<t.length;n++){if(!t[n].name)throw new Error("Input schema is not in a correct format - each column must have a name");t[n].type&&t[n].type===fo.DateTime&&(e[t[n].name]=t[n].format?(void 0!==t[n].enableUTC?t[n].enableUTC:so("enableUTC"))?ba.utcParser(t[n].format):ba.parser(t[n].format):null)}return e}function Aa(t,e,n,r){var o=[];if(t.length>0){var i,a=n,u=e.findIndex((function(t){return"_row_id"===t.name}));a||(a=Sa(e)),-1===u&&(u=e.push({name:"_row_id",type:fo.Number})-1);try{for(var s,c,f,l=e.length,h=0;h<t.length;h++){if(s=[],(c=t[h]).constructor===Array)for(f=Math.min(l,c.length),i=0;i<f;i++)s[i]=xa(e[i],c[i],a);else{if("object"!==ze(c))continue;for(i=0;i<l;i++)void 0!==c[e[i].name]&&null!==c[e[i].name]&&(s[i]=xa(e[i],c[e[i].name],a))}s[u]=r(),o.push(s)}}catch(t){throw new Error("Error while parsing the data - "+t)}}return o}function Ca(t,e,n,r){if(n.enableIndex){var o,i,a;if(!n.indexBy){(a=r)||(a=Sa(e));var u=Object.keys(a);if(u.length>0)n.indexBy=u[0];else{for(o=0;o<e.length;o++)if(e[o].type&&e[o].type===fo.Number){n.indexBy=e[o].name;break}o===e.length&&(n.indexBy=e[0].name)}}for(o=0;o<e.length&&(!e[o]||e[o].name!==n.indexBy);o++);if(o===e.length)throw new Error("Index column is not found in schema");switch(e[o].type){case fo.Number:case fo.DateTime:i=mo;break;default:i=vo}ao(t,(function(t,e){return i(t[o],e[o])}))}}function Fa(t,e,n){var r;if(e instanceof Array){for(var o=[],i=e.length,a=0;a<i;a+=1)o.push(Fa(t,e[a],n));return o}if(!t||"string"!=typeof t)throw new Error("eventName must be a non-empty string");if("function"!=typeof e)throw new Error("handler must be a function");if(!(n instanceof Object))throw new Error("sender must be an object");n._evtHandlers=n._evtHandlers||{},n._evtHandlers[t]&&n._evtHandlers[t]instanceof Array||(n._evtHandlers[t]=[]),r=n._evtHandlers[t].length;for(var u=0;u<r;u++)if(n._evtHandlers[t][u]===e)return!1;return n._evtHandlers[t].push(e),!0}function Ea(t,e){if("string"!=typeof t)throw new Error("eventName must be a non-empty string");if(!(e instanceof Object))throw new Error("sender must be an object");return e._evtHandlers&&e._evtHandlers[t]||[]}function Da(t,e,n){var r,o;if(e instanceof Array){for(var i=[],a=e.length,u=0;u<a;u+=1)i.push(Da(t,e[u],n));return i}if(!t||"string"!=typeof t)throw new Error("eventName must be a non-empty string");if(e&&"function"!=typeof e)throw new Error("handler must be a function");if(!(n instanceof Object))throw new Error("sender must be an object");if((r=Ea(t,n))instanceof Array&&0!==r.length){if(!e)return delete n._evtHandlers[t],!0;o=r.length;for(var s=0;s<o;s++)r[s]===e&&r.splice(s,1);return!0}}function Ma(t,e,n){var r,o,i;if(!t||"string"!=typeof t)throw new Error("eventName must be a non-empty string");if(!(e instanceof Object))throw new Error("sender must be an object");if(i={eventName:t,sender:e,data:n},(r=Ea(t,e))instanceof Array&&0!==r.length){o=r.length;for(var a=0;a<o;a++)r[a](i);return!0}}var Ia=function(){function t(e,n,r,o,i,a,u){We(this,t),this._dataStore=e,this._parentTable=i,this._children=[],this._childrenTableIDs=[],this._opsFunnel=a,this._data=n||[],this._schema=r,this._config=o,this._id=u;var s,c=1;if(this._id||(s=this._parentTable&&this._parentTable._id?this._parentTable._id:"table_1",this._id=s+"_"+c),this._parentTable){for(;this._parentTable._childrenTableIDs.includes(this._id);)this._id=s?s+"_"+ ++c:this._id+"_1";this._parentTable._children.push(this),this._parentTable._childrenTableIDs.push(this._id)}this._result=null}return qe(t,[{key:"count",value:function(){return this._executeFunnel().data.length}},{key:"getSchema",value:function(){return this._executeFunnel().schema}},{key:"getID",value:function(){return this._id}},{key:"getDataStore",value:function(){return this._dataStore}},{key:"getChildren",value:function(t){if(t){for(var e=0;e<this._children.length;e++)if(this._children[e]._id===t)return this._children[e];return null}return this._children}},{key:"getData",value:function(t,e){var n,r=t,o=e;return r=r||0,o=o&&("string"==typeof o||o instanceof String)||null===o?void 0:o,{data:(n=this._executeFunnel()).data&&n.data.slice(r,o&&o>0?r+o:o),schema:n.schema}}},{key:"dispose",value:function(){var t=this;if(t._parentTable&&t._parentTable._children){var e;for(e=0;e<t._parentTable._children.length&&(void 0===t._id||t._id!==t._parentTable._children[e]._id);e++);e!==t._parentTable._children.length&&t._parentTable._children.splice(e,1)}delete t._dataStore,delete t._parentTable,delete t._opsFunnel,delete t._data,delete t._schema,delete t._config,delete t._result,delete t._id,t.disposeChildren(),delete t._children,delete t._childrenTableIDs,t._trigger("disposed"),delete t._evtHandlers,t.disposed=!0,t=null}},{key:"disposeChildren",value:function(){for(var t=(this._children&&this._children.length||0)-1;t>=0;t--)this._children[t].dispose();this._children=[],this._childrenTableIDs=[]}},{key:"min",value:function(t){var e=this.getData();return function(t,e,n){var r,o;if(null===(r=wa(t,n))||-1===r)return null;if(e&&e.length>0){var i;o=Number.POSITIVE_INFINITY;for(var a=0;a<e.length;a++)i=n[r].type===fo.Interval?e[a][r]?e[a][r].start:null:e[a][r],go(i)&&i<o&&(o=i)}return o}(t,e.data,e.schema)}},{key:"max",value:function(t){var e=this.getData();return function(t,e,n){var r,o;if(null===(r=wa(t,n))||-1===r)return null;if(e&&e.length>0){var i;o=Number.NEGATIVE_INFINITY;for(var a=0;a<e.length;a++)i=n[r].type===fo.Interval?e[a][r]?e[a][r].end:null:e[a][r],go(i)&&i>o&&(o=i)}return o}(t,e.data,e.schema)}},{key:"unique",value:function(t){var e=this.getData();return Ta(t,e.data,e.schema)}},{key:"extents",value:function(t){var e=this.getData();return _a(t,e.data,e.schema)}},{key:"addColumns",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.length;if(r>0){this._calcColumns=this._calcColumns||[];for(var o=0;o<r;o++){if(!e[o].name)throw new Error("name is required in column "+(o+1));if(e[o].calcFn&&!(e[o].calcFn instanceof Function))throw new Error("calcFn must be a function in column "+(o+1));e[o].calcFn||(e[o].calcFn=function(){}),this._calcColumns.push(Object.assign({},e[o]))}}this._trigger("updated",e)}},{key:"query",value:function(e){var n=e;return n&&n.constructor!==Array&&(n=[n]),new t(this._dataStore,this._data,this._schema,this._config,this,n)}},{key:"indexOf",value:function(t){return wa(t,this._executeFunnel().schema)}},{key:"on",value:function(t,e){Fa(t,e,this)}},{key:"off",value:function(t,e){Da(t,e,this)}},{key:"_trigger",value:function(t,e){Ma(t,this,e)}},{key:"_executeFunnel",value:function(){if(!this._result)if(this._opsFunnel){var t,e,n,r,o;e=(t=this._parentTable._executeFunnel()).data.slice(0),n=t.schema.slice(0),r=Object.assign({},t.config),o=this._opsFunnel.length;for(var i=0;i<o;i++)if(this._opsFunnel[i]&&this._opsFunnel[i].fn){var a=this._opsFunnel[i].fn(e,n,r);e=a.generatorFn?a.generatorFn():a.data,n=a.schema,void 0===(r=Object.assign(r,a.config)).indexBy&&(r.enableIndex=!1)}this._result={data:e,schema:n,config:r}}else this._result={data:this._data,schema:this._schema,config:this._config};if(this._calcColumns&&this._calcColumns.length>0){var u=function(t,e){for(var n=t.slice(0),r=0;r<e.length;r++){var o=n.length;e[r].originalName=e[r].name;for(var i=0;i<o;i++)e[r].name===n[i].name&&(e[r].i=e[r].i&&++e[r].i||1,e[r].name=e[r].originalName+" "+e[r].i),e[r].type&&-1!==[fo.String,fo.Number,fo.DateTime].indexOf(e[r].type)||(e[r].type=fo.String);delete e[r].originalName,delete e[r].i,n.push({name:e[r].name,type:e[r].type||fo.String}),e[r].calcFn&&(n[n.length-1].calcFn=e[r].calcFn),e[r].format&&(n[n.length-1].format=e[r].format),e[r].enableUTC&&(n[n.length-1].enableUTC=e[r].enableUTC),e[r].columnIndex=n.length-1}return{schema:n,calcColumns:e}}(this._result.schema,this._calcColumns);this._result.schema=u.schema,this._result.data=function(t,e,n){for(var r,o={},i=0;i<e.length;i++)o[e[i].name]=i;for(var a=0;a<t.length;a++)for(var u=0;u<n.length;u++)n[u].calcFn&&(r=n[u].calcFn(t[a],o,a),r=xa(n[u],r,Sa(n)),t[a][n[u].columnIndex]=r);return t}(this._result.data,this._result.schema,u.calcColumns),delete this._calcColumns}return this._result}},{key:"flushResults",value:function(){var t=this._result&&this._result.schema.length||0,e=this._children&&this._children.length||0;t&&(this._calcColumns=[]);for(var n=0;n<t;n++)this._result.schema[n].calcFn&&this._calcColumns.push(this._result.schema[n]);this._result&&(this._result=null);for(var r=0;r<e;r++)this._children[r].flushResults()}},{key:"propagate",value:function(t){this.getDataStore()._propagate({trigger:this,payload:t})}},{key:"_payloadReceiver",value:function(t){var e=this._children&&this._children.length||0;t&&t.trigger&&t.trigger!==this&&this._trigger("payloadReceived",t);for(var n=0;n<e;n++)this._children[n]._payloadReceiver(t)}},{key:"getMinDiff",value:function(t){var e=this.getData();return function(t,e,n,r){var o,i,a=e;if(null===(o=wa(t,n))||-1===o)return null;if(n[o]&&[fo.DateTime,fo.Number].indexOf(n[o].type)<0)throw new Error("Operation valid only on date or number columns");if(r&&t===r||(a=e.slice(0)).sort((function(t,e){return mo(t[o],e[o])})),a&&e.length>0){var u,s,c;i=Number.POSITIVE_INFINITY;for(var f=0;f<a.length-1&&(s=a[f][o],c=a[f+1][o],go(c)&&go(s))&&0!==(i=go(u=c-s)&&u>=0&&u<i?u:i);f++);}return i===Number.POSITIVE_INFINITY?null:i}(t,e.data,e.schema,this._config.indexBy)}},{key:"isUTCEnabled",value:function(t){return function(t,e){var n;return null===(n=wa(t,e))||-1===n||e[n].type!==fo.DateTime&&e[n].type!==fo.Interval?null:void 0!==e[n].enableUTC?e[n].enableUTC:so("enableUTC")}(t,this.getSchema())}}]),t}(),Oa=function(){function t(e,n,r){We(this,t),this.dataTables={},this._dataTableRowIdGenerator={},this._defaultDataTable=null,this._id=+new Date+"",Array.isArray(e)&&Array.isArray(n)&&this.createDataTable(e,n,"table-1",r)}return qe(t,[{key:"createDataTable",value:function(t,e,n,r){if(!t||!e)throw new Error("Both data and schema must be provided to build DataTable");if(t.constructor!==Array)throw new Error("Data must be provided in 2D array format or array of json objects");if(e.constructor!==Array||0===e.length)throw new Error("Input schema is not in a correct format - schema must be an array of column configurations");var o,i,a={},u=n;if(i=Object.keys(this.dataTables),u){if(i.includes(u))throw new Error("A table with the id "+u+" already exists in the DataStore. Please use a different id.")}else u=function(t){for(var e=t.length+1;t.includes("table-"+e);)e++;return"table-"+e}(i);Object.assign(a,{enableIndex:!1,enableUTC:!1},r);var s=function(t){void 0===t&&(t=1);var e=t;return function(){return e++}}(),c=e.slice();return this._dataTableRowIdGenerator[u]=s,o=new Ia(this,function(t,e,n,r){var o=Sa(e),i=Aa(t,e,o,r);return Ca(i,e,n,o),i}(t,c,a,s),c,a,null,null,u),0===i.length&&(this._defaultDataTable=o),this.dataTables[u]=o,o}},{key:"appendRows",value:function(t,e){var n,r,o,i=this.getDataTable(e),a=i.getSchema();r=Aa(t,a,o=Sa(a),this._dataTableRowIdGenerator[i.getID()]),(n=i._data).push.apply(n,Qe(r)),Ca(i._data,a,i._config,o),i.flushResults(),this.trigger("itemsAdded",{rows:t,parsedRows:r,tableID:e})}},{key:"deleteRows",value:function(t,e){var n=this.getDataTable(e),r=n.query(t),o=r.getData().data,i=n.indexOf("_row_id"),a=r.indexOf("_row_id"),u=o.map((function(t){return t[a]}));n._data=n._data.filter((function(t){return!u.includes(t[i])})),n.flushResults(),this.trigger("itemsRemoved",{rows:o,tableID:e}),r.dispose()}},{key:"getDataTable",value:function(t){if(t){if(!this.dataTables[t])throw new Error("DataTable with id "+t+" is not found in the DataStore.");return this.dataTables[t]}return this._defaultDataTable}},{key:"on",value:function(t,e){Fa(t,e,this)}},{key:"off",value:function(t,e){Da(t,e,this)}},{key:"trigger",value:function(t,e){Ma(t,this,e)}},{key:"dispose",value:function(){var t=this;for(var e in t.dataTables)t.dataTables.hasOwnProperty(e)&&(t.dataTables[e].dispose(),delete t.dataTables[e]);delete t._id,delete t.dataTables,delete t._dataTableRowIdGenerator,delete t._defaultDataTable,this.trigger("disposed"),t=null}},{key:"_propagate",value:function(t){for(var e in this.trigger("payloadReceived",t),this.dataTables)this.dataTables.hasOwnProperty(e)&&this.dataTables[e]._payloadReceiver(t)}}]),t}();function Ua(t,e,n,r,o){for(var i=r,a=o;i<a;){var u=i+Math.floor((a-i)/2);n(e[u],t)<0?i=u+1:a=u}return i}function ka(t,e,n,r,o){for(var i=r,a=o;i<a;){var u=i+Math.floor((a-i)/2);n(e[u],t)>0?a=u:i=u+1}return i-1}var Na=0,ja=1,La=2,Ra=3,Ya=4,Ha=5,Pa=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(t[e].type){case fo.Interval:return function(t,n){return mo(t[e].start,n)};case fo.Number:case fo.DateTime:return function(t,n){return mo(t[e],n)};default:return n?function(t,n){return vo(t[e],n)}:function(t,n){return vo(String(t[e]).toLowerCase(),String(n).toLowerCase())}}};function Ba(t,e){return RegExp(t,e)}var Va={UNSUPPORTED_Y:o((function(){var t=Ba("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:o((function(){var t=Ba("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},za=E.f,Wa=bt.f,Ga=tt.set,qa=Pt("match"),Qa=r.RegExp,Za=Qa.prototype,Xa=/a/g,$a=/a/g,Ja=new Qa(Xa)!==Xa,Ka=Va.UNSUPPORTED_Y;if(i&&Dt("RegExp",!Ja||Ka||o((function(){return $a[qa]=!1,Qa(Xa)!=Xa||Qa($a)==$a||"/a/i"!=Qa(Xa,"i")})))){for(var tu=function(t,e){var n,r=this instanceof tu,o=Pe(t),i=void 0===e;if(!r&&o&&t.constructor===tu&&i)return t;Ja?o&&!i&&(t=t.source):t instanceof tu&&(i&&(e=xr.call(t)),t=t.source),Ka&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var a=tr(Ja?new Qa(t,e):Qa(t,e),r?this:Za,tu);return Ka&&n&&Ga(a,{sticky:n}),a},eu=function(t){t in tu||za(tu,t,{configurable:!0,get:function(){return Qa[t]},set:function(e){Qa[t]=e}})},nu=Wa(Qa),ru=0;nu.length>ru;)eu(nu[ru++]);Za.constructor=tu,tu.prototype=Za,et(r,"RegExp",tu)}kr("RegExp");var ou=RegExp.prototype.exec,iu=String.prototype.replace,au=ou,uu=function(){var t=/a/,e=/b*/g;return ou.call(t,"a"),ou.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),su=Va.UNSUPPORTED_Y||Va.BROKEN_CARET,cu=void 0!==/()??/.exec("")[1];(uu||cu||su)&&(au=function(t){var e,n,r,o,i=this,a=su&&i.sticky,u=xr.call(i),s=i.source,c=0,f=t;return a&&(-1===(u=u.replace("y","")).indexOf("g")&&(u+="g"),f=String(t).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==t[i.lastIndex-1])&&(s="(?: "+s+")",f=" "+f,c++),n=new RegExp("^(?:"+s+")",u)),cu&&(n=new RegExp("^"+s+"$(?!\\s)",u)),uu&&(e=i.lastIndex),r=ou.call(a?n:i,f),a?r?(r.input=r.input.slice(c),r[0]=r[0].slice(c),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:uu&&r&&(i.lastIndex=i.global?r.index+r[0].length:e),cu&&r&&r.length>1&&iu.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r});function fu(t){return t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function lu(t,e,n){var r=e,o=n;return{ops:"indexColIN",type:Na,_updateArgs:function(t){r=t},fn:function(e,n,i,a){var u,s="function"==typeof a?a():e;return u=function(){var e,i,a,u;o||(o=Pa(n,t,!0)),a=r.slice(0).sort(function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(t){case fo.Number:case fo.DateTime:return function(t,e){return mo(t,e)};default:return e?function(t,e){return vo(t,e)}:function(t,e){return vo(String(t).toLowerCase(),String(e).toLowerCase())}}}(n[t].type===fo.Interval?fo.Number:n[t].type,!0)),i=-1,u=[];for(var c=0;c<a.length&&!((e=Ua(a[c],s,o,i+1,s.length))>=s.length);c++){var f;0===o(s[e],a[c])&&(i=ka(a[c],s,o,e,s.length),(f=u).push.apply(f,Qe(s.slice(e,i+1))))}return u},{data:s,schema:n,config:i,generatorFn:u}}}}It({target:"RegExp",proto:!0,forced:/./.exec!==au},{exec:au});var hu=ar.trim,pu=r.parseInt,du=/^[+-]?0[Xx]/,gu=8!==pu(er+"08")||22!==pu(er+"0x16")?function(t,e){var n=hu(String(t));return pu(n,e>>>0||(du.test(n)?16:10))}:pu;It({global:!0,forced:parseInt!=gu},{parseInt:gu});var mu=function(t,e,n){return((n-1)*t+e)/n},vu=function(t,e,n){var r,o=e,i=0;return t&&(o=t.avg,i=t.variance),r=o,n>1&&(i=(i*(n-2)+(e-(o=mu(o,e,n)))*(e-r))/(n-1)),{avg:o,variance:i}},yu={store:{},_defaultAggregators:Object.freeze({__proto__:null,sum:function(t,e){return t+e},avg:mu,count:function(t){return t+1},min:function(t,e){return null!==t?t>e?e:t:e},max:function(t,e){return null!==t?t<e?e:t:e},first:function(t,e){return null===t?e:t},last:function(t,e){return e},variance:vu,stddev:function(t,e,n){var r,o;return t&&(r={avg:t.avg,variance:t.stddev*t.stddev}),{avg:(o=vu(r,e,n)).avg,stddev:Math.sqrt(o.variance)}}}),register:function(t,e){return this.store[t]=e,this},getRegisteredAggregations:function(){return Object.assign(this.store)},getDefaultAggregations:function(){return Object.assign(this._defaultAggregators)},resolve:function(t){return this._defaultAggregators[t]||this.store[t]}},bu={Year:"%Y",Month:"%b %Y",Day:"%b %d, %Y",Hour:"%b %d, %Y %H hrs",Minute:"%b %d, %Y %H:%M",Second:"%b %d, %Y %H:%M:%S",Millisecond:"%b %d, %Y %H:%M:%S:%L"},wu={Millisecond:Ao,Second:Co,Minute:Fo,Hour:Eo,Day:Do,Week:{0:Io,1:Oo,2:Uo,3:ko,4:No,5:jo,6:Lo},Month:Yo,Quarter:Ro,Year:Po},_u={Millisecond:Ao,Second:Co,Minute:Bo,Hour:Vo,Day:zo,Week:{0:Go,1:qo,2:Qo,3:Zo,4:Xo,5:$o,6:Jo},Month:ti,Quarter:Ko,Year:ni};function Tu(){var t,e=this.config;switch(t=void 0!==e.enableUTC&&e.enableUTC?ba.utcFormatter(e.outputFormat):ba.formatter(e.outputFormat),e.duration.Unit){case"Millisecond":case"Second":case"Minute":case"Hour":case"Day":case"Month":case"Year":return t.format(new Date(this.start))+(e.duration.number>1?" - "+t.format(new Date(this.end-1)):"");case"Week":case"Quarter":return t.format(new Date(this.start))+" - "+t.format(new Date(this.end-1))}}function xu(t,e,n,r,o){var i,a=void 0!==n&&n?_u[e.Unit]:wu[e.Unit],u=r;if(u&&!po[u.name])throw new Error("Invalid weekStartFrom provided: "+u);return 1===e.number?"Week"===e.Unit?+a[(u=u||po.Sunday).id].floor(new Date(t)):+a.floor(new Date(t)):o?"Week"===e.Unit?(i=a[(u=u||po.Sunday).id].count(o,t)%e.number)?Su(+a[u.id].floor(t),e.Unit,-i,n):+a[u.id].floor(t):(i=a.count(o,t)%e.number)?Su(+a.floor(t),e.Unit,-i,n):+a.floor(t):"Week"===e.Unit?+a[(u=u||po.Sunday).id].every(e.number).floor(new Date(t)):+a.every(e.number).floor(new Date(t))}function Su(t,e,n,r,o){switch(e){case"Month":case"Quarter":case"Year":return+(void 0!==r&&r?_u[e]:wu[e]).offset(new Date(t),n);default:return t+ho[e].ms*n}}function Au(t,e){var n=e;if(!t||!ho[t.name])throw new Error("Invalid Unit provided: "+t);return n=Math.abs(n)||1,{Unit:t.name,number:n,ms:t.ms*n}}function Cu(t,e,n){if(void 0===n&&(n=!1),e.duration.ms){var r=function(t,e,n,r,o){var i,a;return void 0===o&&(o=!1),i=t,o&&((a=Object.assign({},e)).number=1,i=xu(i,a,n,r)),{startDate:i,endDate:Su(i,e.Unit,e.number,n)}}(t,e.duration,e.enableUTC,e.weekStartFrom||po.Sunday,n),o=r.startDate,i=r.endDate;return e.outputFormat=e.outputFormat||function(t){switch(t){case"Millisecond":case"Second":case"Minute":case"Hour":case"Day":case"Month":case"Year":return bu[t];case"Week":return bu.Day;case"Quarter":return bu.Month}}(e.duration.Unit),{start:o,end:i,config:e,toString:Tu}}}function Fu(t,e){var n=t,r=e;return{ops:"groupBy",type:Ra,_updateArgs:function(t,e){n=t,r=e},fn:function(t,e,o,i){var a="function"==typeof i?i():t;if(!n||0===n.length)throw new Error("groupConfigArray cannot be empty");if(!r||0===r.length)throw new Error("aggrConfigArray cannot be empty");return!(n instanceof Array)&&n instanceof Object&&(n=[n]),!(r instanceof Array)&&r instanceof Object&&(r=[r]),1===n.length&&o&&n[0].column===o.indexBy?function(t,e,n,r,o){var i,a,u,s,c,f,l,h,p,d=[],g=t.length,m=0,v=Iu(),y=[];if((a=v(r.column,e)).outputAs=r.outputAs,i=Eu(e,[a],o,v),g>0){if(h=a.enableUTC||so("enableUTC"),a.type===fo.DateTime){var b,w,_;if(s=Au(r.timeUnit,Math.abs(r.binSize)||1),t[0]&&t[0][a.index]&&t[g-1]&&t[g-1][a.index]||(b=_a(r.column,t,e,n.indexBy)),w=t[0]&&t[0][a.index]||b.min,_=r.startValue&&parseInt(r.startValue,10))if(_>=w){c=xu(_,Au(r.timeUnit,1),h,r.weekStartFrom),m=Ua(c,t,(function(t,e){return mo(t[a.index],e)}),0,t.length)}else c=xu(w,s,h,r.weekStartFrom,_);else c=xu(w,Au(r.timeUnit,1),h,r.weekStartFrom);u=t[g-1]&&t[g-1][a.index]||b.max}if(void 0===c||c<=u){var T={duration:s,outputFormat:r.outputFormat,enableUTC:h,weekStartFrom:r.weekStartFrom};for(void 0!==c&&(f=[Cu(c,T)],d.push(f)),p=m;p<g;p++)t[p].length>0&&(a.type===fo.DateTime?f=Mu(d,f,t[p][a.index],T,c):a.type!==fo.String&&a.type!==fo.Number||(f=Du(d,f,t[p][a.index])),l=d.length-1,y[l]=y[l]||{},f&&Uu(t[p],e,f,1,o,v,y[l]))}}return{data:d,schema:i,config:{indexBy:r.outputAs||r.column}}}(a,e,o,n[0],r):function(t,e,n,r,o){var i,a,u,s,c,f=[],l=[],h=!0,p=t.length,d=r.length,g={},m=[],v=Iu(),y={},b=0;for(c=0;c<d;c++)(a=v(r[c].column,e,t)).outputAs=r[c].outputAs,a.type===fo.DateTime&&(g[c]||(r[c].startValue>=a.peaks.max&&(h=!1),g[c]=Object.assign({},a),g[c].intervalConfig={duration:Au(r[c].timeUnit,Math.abs(r[c].binSize)||1),outputFormat:r[c].outputFormat,enableUTC:a.enableUTC||so("enableUTC"),weekStartFrom:r[c].weekStartFrom},u=parseInt(r[c].startValue,10)||a.peaks.min,g[c].startValFloorVal=u&&xu(u,Au(r[c].timeUnit,1),g[c].intervalConfig.enableUTC,g[c].intervalConfig.weekStartFrom,parseInt(r[c].startValue,10)),g[c].max=a.peaks.max)),l[c]=a,s||r[c].column!==n.indexBy||(s=r[c].outputAs||r[c].column);if(i=Eu(e,l,o,v),h&&p>0)for(c=0;c<p;c++)b=Ou(t[c],e,r,o,v,g,y,b,f,m);return{data:f,schema:i,config:{indexBy:s}}}(a,e,o,n,r)}}}function Eu(t,e,n,r){var o,i,a,u,s,c=[],f=e,l=n,h=f.length,p=l.length;for(f=f instanceof Array?f:[f],l=l instanceof Array?l:[l],a=0;a<h;a++)o=r(f[a].column,t),s={name:f[a].outputAs||f[a].column,type:o.type===fo.DateTime?fo.Interval:o.type},void 0!==o.enableUTC&&(s.enableUTC=o.enableUTC),c.push(s);for(a=0;a<p;a++){if(u=l[a].operation||"avg",o=r(l[a].column,t),!yu.resolve(u))throw new Error("".concat(u," is not a defined operation"));switch(u){case"first":case"last":i=o.type;break;case"count":i=fo.Number;break;default:if(o.type!==fo.Number)throw new Error("".concat(u," can apply only on numbers"));i=fo.Number}c.push({name:l[a].outputAs||l[a].column+(u?" - "+u:""),type:i})}return c}function Du(t,e,n){var r=e;return r&&n===r[0]||(r=[n],t.push(r)),r}function Mu(t,e,n,r,o){var i=e;if(n>=i[0].end){var a;switch(r.duration.Unit){case"Month":case"Quarter":case"Year":a=xu(n,r.duration,r.enableUTC,r.weekStartFrom,o);break;default:a=n-(n-o)%r.duration.ms}i=[Cu(a,r)],t.push(i)}return i}function Iu(){var t={};return function(e,n,r){if(!t[e]){var o=wa(e,n),i=n[o];if(void 0===i)throw new Error("incorrect column name in config - "+e);t[e]=i,t[e].column=e,t[e].index=o,i.type===fo.DateTime&&r&&(t[e].peaks=_a(e,r,n))}return t[e]}}function Ou(t,e,n,r,o,i,a,u,s,c){var f,l,h,p,d="",g=[],m=n.length,v=u;if(t.length>0){for(f=0;f<m;f++)if((l=o(n[f].column,e)).type===fo.DateTime){if(i[f].startValFloorVal>t[l.index])return v;switch(n[f].timeUnit.name){case"Month":case"Quarter":case"Year":i[f].value=xu(t[l.index],i[f].intervalConfig.duration,i[f].intervalConfig.enableUTC,i[f].intervalConfig.weekStartFrom,i[f].startValFloorVal);break;default:i[f].value=t[l.index]-(t[l.index]-i[f].startValFloorVal)%i[f].intervalConfig.duration.ms}d+=i[f].value+"-"}else g[f]=t[l.index],d+=t[l.index]+"-";if(a[d=d.slice(0,-1)]>=0)g=s[a[d]],h=a[d];else{for(var y in a[d]=v++,i)p=Cu(i[y].value,i[y].intervalConfig),g[y]=p;s.push(g),h=s.length-1}return c[h]=c[h]||{},g&&Uu(t,e,g,m,r,o,c[h]),v}}function Uu(t,e,n,r,o,i,a){var u,s,c,f,l=o.length;for(f=0;f<l;f++)if(void 0!==t[(u=i(o[f].column,e)).index]&&null!==t[u.index]){switch(s=o[f].operation||"avg"){case"sum":case"min":case"max":case"first":case"last":c=null;break;default:c=a[f]=a[f]&&a[f]+1||1}n[r+f]="count"===s?c:yu.resolve(s)(void 0!==n[r+f]?n[r+f]:null,t[u.index],c)}}function ku(t,e,n,r,o,i,a,u,s){var c,f,l,h,p,d=o.length;for(h=0;h<d;h++)if(void 0!==t[c=u(o[h].column,e)]&&null!==t[c]){switch(f=o[h].operation||"avg",p=a[t[i]+" - "+(o[h].outputAs||o[h].column+(f?" - "+f:""))],f){case"sum":case"min":case"max":case"first":case"last":l=null;break;default:l=s[p]=s[p]&&s[p]+1||1}n[r+p]="count"===f?l:yu.resolve(f)(void 0!==n[r+p]?n[r+p]:null,t[c],l)}}var Nu=Oa;return Nu.Operators={between:function(t,e,n){var r=e,o=n;return{ops:"between",type:ja,_updateArgs:function(t,e){r=t,o=e},fn:function(e,n,i,a){var u="function"==typeof a?a():e,s=wa(t,n);if(s>=0){var c=Pa(n,s);return i&&i.indexBy===t?function(t,e,n,r){var o=e,i=n,a=r;return{ops:"indexColBetween",type:Na,_updateArgs:function(t,e){o=t,i=e},fn:function(e,n,r,u){a||(a=Pa(n,t));var s="function"==typeof u?u():e,c=n[t].type===fo.Interval?function(e,n){return mo(e[t].end,n)}:a,f=Ua(o,s,a,0,s.length),l=ka(i,s,c,f,s.length);return{data:s,schema:n,config:r,generatorFn:function(){return s.slice(f,l+1)}}}}}(s,r,o,c).fn(u,n,i):{data:u,schema:n,config:i,generatorFn:function(){return u.filter((function(t){return c(t,r)>=0&&c(t,o)<=0}))}}}throw new Error("Column '"+t+"' is not found in the schema.")}}},equals:function(t,e){var n=e;return{ops:"equals",type:ja,_updateArgs:function(t){n=t},fn:function(e,r,o,i){var a="function"==typeof i?i():e,u=wa(t,r);if(u>=0){var s=Pa(r,u);return o&&o.indexBy===t?function(t,e,n){var r=e,o=n;return{ops:"indexColEquals",type:Na,_updateArgs:function(t){r=t},fn:function(e,n,i,a){o||(o=Pa(n,t));var u="function"==typeof a?a():e,s=Ua(r,u,o,0,u.length);if(s>=u.length||0!==o(u[s],r))return{data:[],schema:n,config:i};var c=ka(r,u,o,s,u.length);return{data:u,schema:n,config:i,generatorFn:function(){return u.slice(s,c+1)}}}}}(u,n,s).fn(a,r,o):{data:a,schema:r,config:o,generatorFn:function(){return a.filter((function(t){return 0===s(t,n)}))}}}throw new Error("Column '"+t+"' is not found in the schema.")}}},less:function(t,e){var n=e;return{ops:"less",type:ja,_updateArgs:function(t){n=t},fn:function(e,r,o,i){var a="function"==typeof i?i():e,u=wa(t,r);if(u>=0){var s=Pa(r,u);return o&&o.indexBy===t?function(t,e,n){var r=e,o=n;return{ops:"indexColLess",type:Na,_updateArgs:function(t){r=t},fn:function(e,n,i,a){o||(o=Pa(n,t));var u="function"==typeof a?a():e,s=Ua(r,u,o,0,u.length);return{data:u,schema:n,config:i,generatorFn:function(){return u.slice(0,s)}}}}}(u,n,s).fn(a,r,o):{data:a,schema:r,config:o,generatorFn:function(){return a.filter((function(t){return s(t,n)<0}))}}}throw new Error("Column '"+t+"' is not found in the schema.")}}},lessEquals:function(t,e){var n=e;return{ops:"lessEquals",type:ja,_updateArgs:function(t){n=t},fn:function(e,r,o,i){var a="function"==typeof i?i():e,u=wa(t,r);if(u>=0){var s=Pa(r,u);return o&&o.indexBy===t?function(t,e,n){var r=e,o=n;return{ops:"indexColLessEquals",type:Na,_updateArgs:function(t){r=t},fn:function(e,n,i,a){o||(o=Pa(n,t));var u="function"==typeof a?a():e,s=ka(r,u,o,0,u.length);return{data:u,schema:n,config:i,generatorFn:function(){return u.slice(0,s+1)}}}}}(u,n,s).fn(a,r,o):{data:a,schema:r,config:o,generatorFn:function(){return a.filter((function(t){return s(t,n)<=0}))}}}throw new Error("Column '"+t+"' is not found in the schema.")}}},greater:function(t,e){var n=e;return{ops:"greater",type:ja,_updateArgs:function(t){n=t},fn:function(e,r,o,i){var a="function"==typeof i?i():e,u=wa(t,r);if(u>=0){var s=Pa(r,u);return o&&o.indexBy===t?function(t,e,n){var r=e,o=n;return{ops:"indexColGreater",type:Na,_updateArgs:function(t){r=t},fn:function(e,n,i,a){o||(o=Pa(n,t));var u="function"==typeof a?a():e,s=ka(r,u,o,0,u.length),c=Ua(null,u,o,s,u.length);return{data:u,schema:n,config:i,generatorFn:function(){return u.slice(s+1,c)}}}}}(u,n,s).fn(a,r,o):{data:a,schema:r,config:o,generatorFn:function(){return a.filter((function(t){return null!==t[u]&&void 0!==t[u]&&s(t,n)>0}))}}}throw new Error("Column '"+t+"' is not found in the schema.")}}},greaterEquals:function(t,e){var n=e;return{ops:"greaterEquals",type:ja,_updateArgs:function(t){n=t},fn:function(e,r,o,i){var a="function"==typeof i?i():e,u=wa(t,r);if(u>=0){var s=Pa(r,u);return o&&o.indexBy===t?function(t,e,n){var r=e,o=n;return{ops:"indexColGreaterEquals",type:Na,_updateArgs:function(t){r=t},fn:function(e,n,i,a){o||(o=Pa(n,t));var u="function"==typeof a?a():e,s=Ua(r,u,o,0,u.length),c=Ua(null,u,o,s,u.length);return{data:u,schema:n,config:i,generatorFn:function(){return u.slice(s,c)}}}}}(u,n,s).fn(a,r,o):{data:a,schema:r,config:o,generatorFn:function(){return a.filter((function(t){return null!==t[u]&&void 0!==t[u]&&s(t,n)>=0}))}}}throw new Error("Column '"+t+"' is not found in the schema.")}}},IN:function(t,e){var n=e;return{ops:"IN",type:ja,_updateArgs:function(t){n=t},fn:function(e,r,o,i){if(!Array.isArray(n))throw new Error("For the IN filter - search values must be an array");var a=wa(t,r),u="function"==typeof i?i():e;if(a>=0)return o&&o.indexBy===t?lu(a,n).fn(u,r,o):{data:u,schema:r,config:o,generatorFn:function(){return u.filter((function(t){return-1!==n.indexOf(t[a])}))}};throw new Error("Column '"+t+"' is not found in the schema.")}}},contains:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e;return{ops:"contains",type:ja,_updateArgs:function(t){r=t},fn:function(e,o,i,a){var u=fu(r),s=n?new RegExp(u,"u"):new RegExp(u,"iu"),c=wa(t,o),f="function"==typeof a?a():e,l=function(){return f.filter((function(t){return"string"==typeof t[c]&&s.test(t[c])}))};if(c>=0){if(void 0!==o[c].type&&o[c].type!==fo.String)throw new Error("Column '"+t+"' is not valid for contains operation. Contains operation can only be performed on string type columns.");return{data:f,schema:o,config:i,generatorFn:l}}throw new Error("Column '"+t+"' is not found in the schema.")}}},startsWith:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e;return{ops:"startsWith",type:ja,_updateArgs:function(t){r=t},fn:function(e,o,i,a){var u="^"+fu(r),s=n?new RegExp(u,"u"):new RegExp(u,"iu"),c=wa(t,o),f="function"==typeof a?a():e,l=function(){return f.filter((function(t){return"string"==typeof t[c]&&s.test(t[c])}))};if(c>=0){if(void 0!==o[c].type&&o[c].type!==fo.String)throw new Error("Column '"+t+"' is not valid for startsWith operation. startsWith operation can only be performed on string type columns.");return{data:f,schema:o,config:i,generatorFn:l}}throw new Error("Column '"+t+"' is not found in the schema.")}}},endsWith:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e;return{ops:"endsWith",type:ja,_updateArgs:function(t){r=t},fn:function(e,o,i,a){var u=fu(r)+"$",s=n?new RegExp(u,"u"):new RegExp(u,"iu"),c=wa(t,o),f="function"==typeof a?a():e,l=function(){return f.filter((function(t){return"string"==typeof t[c]&&s.test(t[c])}))};if(c>=0){if(void 0!==o[c].type&&o[c].type!==fo.String)throw new Error("Column '"+t+"' is not valid for endsWith operation. endsWith operation can only be performed on string type columns.");return{data:f,schema:o,config:i,generatorFn:l}}throw new Error("Column '"+t+"' is not found in the schema.")}}},filter:function(t){var e=this;return{ops:"filter",type:ja,fn:function(n,r,o,i){var a=n;return{data:a,schema:r,config:o,generatorFn:function(){"function"==typeof i&&(a=i());for(var n={},o=0;o<r.length;o++)n[r[o].name]=o;return a.filter((function(r){return t.call(e,r,n)}))}}}}},or:function(t,e){return{ops:"or",type:La,fn:function(n,r,o,i){if(!t||!e)throw new Error("2 operators needed for the OR operation");if(void 0===t.type||void 0===e.type)throw new Error("Invlid operators are being used in OR operation");if(t.type>2||e.type>2)throw new Error("Or operations can only be performed with filters or other logical operations");var a="function"==typeof i?i():n;return{data:a,schema:r,config:o,generatorFn:function(){for(var n,i,u,s,c,f,l,h,p=[],d=0;d<a.length;d++)(h=a[d].slice(0)).push(d),p.push(h);var g=t.fn(p,r,o),m=e.fn(p,r,o),v=r.length;n="function"==typeof g.generatorFn?g.generatorFn():g.data,i="function"==typeof m.generatorFn?m.generatorFn():m.data,n.length>=i.length?(u=n,s=i):(u=i,s=n),c=Qe(u),l=function(t,e){return mo(t[v],e)},f=-1;for(var y=0;y<s.length;y++)if((f=Ua(s[y][v],c,l,f+1,c.length))>=c.length)c.push(s[y]);else{if(c[f][v]===s[y][v])continue;c.splice(f,0,s[y])}for(var b=0;b<c.length;b++)c[b].splice(c[b].length-1,1);return c}}}}},not:function(t){return{ops:"not",type:La,fn:function(e,n,r,o){if(!t)throw new Error("Operation to perform not is missing");if(void 0===t.type)throw new Error("Invlid operation is used for not operation");if(t.type>2)throw new Error("Not operations can only be performed with filters or other logical operations");var i="function"==typeof o?o():e;return{data:i,schema:n,config:r,generatorFn:function(){var e,o,a=!1,u=wa("_row_id",n),s=t.fn(i,n,r),c=new Set;if(e="function"==typeof s.generatorFn?s.generatorFn():s.data,u<0){for(var f=0;f<e.length;f++)e[f].push(f+1);u=n.length,a=!0}for(var l=0;l<e.length;l++)c.add(e[l][u]);return o=i.filter((function(t){return!c.has(t[u])})),a&&(o=o.map((function(t){return t.slice(0,u)})),i=i.map((function(t){return t.slice(0,u)}))),o}}}}},select:function(t,e){var n=t,r=e;return n=n&&n.constructor!==Array?[n]:n,{ops:"select",type:Ha,fn:function(t,e,o,i){var a,u,s=[],c=[];if(n)if((r=r||{exclude:!1}).exclude)for(a=0;a<e.length;a++)n.includes(e[a].name)||(s.push(e[a]),c.push(a));else for(a=0;a<n.length;a++)(u=wa(n[a],e))>-1&&!c.includes(u)&&(s.push(e[u]),c.push(u));else s=e;return{data:t,schema:s,config:o,generatorFn:function(){var e=c.length;if(e>0){var n,r,o,i=[];for(n=0;n<t.length;n++){for(o=[],r=0;r<e;r++)o[r]=t[n][c[r]];i[n]=o}return i}return t.slice(0)}}}}},groupBy:Fu,pipe:function(){for(var t,e=[],n=[],r=[],o=function(t,e){for(var n=[],r=t.length,o=0;o<r;o++)e[o]||n.push(t[o]);return n&&n.length>0&&eo(n,(function(t,e){return t.type-e.type})),n},i=function(t){var e=[],n=t.length;eo(t,(function(t,e){return t.type-e.type})),e.push(t[0]);for(var r=1;r<n;r++)t[r].type>=3&&t[r].type===e[e.length-1].type&&e.pop(),e.push(t[r]);return e},a=arguments.length,u=new Array(a),s=0;s<a;s++)u[s]=arguments[s];t=u.length;for(var c=0;c<t;c++)switch(u[c].type){case Na:case ja:case La:e.push(u[c]),n.push(!1);break;case Ha:case Ya:e.push(u[c]),n.push(!0);break;case Ra:r=r.concat(o(e,n),u[c]),e=[],n=[]}return r=r.concat(i(e))},sort:function(t){var e=t;return{ops:"sort",type:Ya,_updateArgs:function(t){e=t},fn:function(t,n,r,o){var i,a,u=t;return Array.isArray(e)&&e.length?a=e[0]:"object"===ze(e)&&(a=e),void 0===a||void 0===a.column||void 0!==a.order&&"asc"!==a.order?"object"===ze(r)&&(i=Object.assign(r,{enableIndex:!1,indexBy:void 0})):i=Object.assign(r||{},{enableIndex:!0,indexBy:a.column}),{data:u,schema:n,config:i,generatorFn:function(){var t;if("function"==typeof o&&(u=o()),e.constructor===Function)t=e;else{e.constructor!==Array&&(e=[e]);var r,i,a,s=[],c=[];for(r=0;r<e.length;r++)if(e[r].column){if(i=wa(e[r].column,n),c.push(i),-1===i)throw new Error("Sort column is not found in schema - "+e[r].column);switch(n[i].type){case fo.Number:case fo.Interval:case fo.DateTime:s.push(mo);break;default:s.push(vo)}}t=function(t,o){for(r=0;r<e.length;r++){if(0!==(a=n[c[r]].type===fo.Interval?"desc"===e[r].order?s[r](o[c[r]].start,t[c[r]].start):s[r](t[c[r]].start,o[c[r]].start):"desc"===e[r].order?s[r](o[c[r]],t[c[r]]):s[r](t[c[r]],o[c[r]])))return a;if(r===e.length-1)return 0}}}return ao(u,t),u}}}}},pivot:function(t,e,n){var r=t,o=e,i=n;return{ops:"pivot",type:Ra,_updateArgs:function(t,e,n){r=t,o=e,i=n},fn:function(t,e,n,a){if(0===r.length)throw new Error("groupConfigArray cannot be empty");if(0===i.length)throw new Error("aggrConfigArray cannot be empty");if(!o)throw new Error("pivotCol cannot be empty");return!(r instanceof Array)&&r instanceof Object&&(r=[r]),!(i instanceof Array)&&i instanceof Object&&(i=[i]),1===r.length&&n&&r[0].column===n.indexBy?function(t,e,n,r,o,i){var a,u,s,c,f,l,h,p,d,g,m,v,y,b,w,_=[],T=t.length,x=0,S=function(){var t={};return function(e,n){return t[e]||(t[e]=wa(e,n)),t[e]}}(),A=[];if(-1===(c=wa(r.column,e)))throw new Error("incorrect column name in groupConfigArr - "+r);if(-1===(l=wa(i,e)))throw new Error("incorrect pivot column name");if(f=e[c],h=e[l],(d=Object.assign({},r)).type=f.type,d.outputAs=r.outputAs,s=function(t,e,n,r,o){var i,a,u,s,c,f,l,h,p,d,g,m,v,y=[],b={},w=0,_=n,T=r;for(_=_ instanceof Array?_:[_],T=T instanceof Array?T:[T],s=_.length,c=T.length,d=0;d<s;d++){if(f=wa(_[d].column,e),l=e[f],-1===f)throw new Error("incorrect column name in groupConfigArr - "+_[d].column);v={name:_[d].outputAs||_[d].column,type:l.type===fo.DateTime?fo.Interval:l.type},void 0!==l.enableUTC&&(v.enableUTC=l.enableUTC),y.push(v)}switch(o.type){case fo.Number:case fo.DateTime:i=mo;break;default:i=vo}for((a=Ta(o.name,t,e)).sort((function(t,e){return i(t,e)})),u=a.length,d=0;d<c;d++){if(m=T[d].operation||"avg",f=wa(T[d].column,e),l=e[f],-1===f)throw new Error("incorrect column name in aggrConfigArr - "+T[d].column);if(!yu.resolve(m))throw new Error("".concat(m," is not a defined operation"));switch(m){case"first":case"last":h=l.type;break;case"count":h=fo.Number;break;default:if(l.type!==fo.Number)throw new Error("".concat(m," can apply only on numbers"));h=fo.Number}for(g=0;g<u;g++)p=a[g]+" - "+(T[d].outputAs||T[d].column+(m?" - "+m:"")),b[p]=w++,y.push({name:p,type:h})}return{schema:y,pivots:b}}(t,e,d,o,h),a=s.schema,u=s.pivots,T>0){if(b=f.enableUTC||so("enableUTC"),f.type===fo.DateTime){var C,F,E;if(g=Au(r.timeUnit,Math.abs(r.binSize)||1),t[0]&&t[0][c]&&t[T-1]&&t[T-1][c]||(C=_a(r.column,t,e,n.indexBy)),F=t[0]&&t[0][c]||C.min,E=r.startValue&&parseInt(r.startValue,10))if(E>=F){m=xu(E,Au(r.timeUnit,1),b,r.weekStartFrom),x=Ua(m,t,(function(t,e){return mo(t[c],e)}),0,t.length)}else m=xu(F,g,b,r.weekStartFrom,E);else m=xu(F,Au(r.timeUnit,1),b,r.weekStartFrom);p=t[T-1]&&t[T-1][c]||C.max}if(void 0===m||m<=p){var D={duration:g,outputFormat:r.outputFormat,enableUTC:b,weekStartFrom:r.weekStartFrom};for(void 0!==m&&(v=[Cu(m,D)],_.push(v)),w=x;w<T;w++)t[w].length>0&&(f.type===fo.DateTime?v=Mu(_,v,t[w][c],D,m):f.type!==fo.String&&f.type!==fo.Number||(v=Du(_,v,t[w][c])),y=_.length-1,A[y]=A[y]||{},v&&ku(t[w],e,v,1,o,l,u,S,A[y]))}}return{data:_,schema:a,config:{indexBy:r.outputAs||r.column}}}(t,e,n,r[0],i,o):function(t,e,n,r,o,i,a){var u,s,c,f,l,h,p,d,g,m,v={},y={},b=function(t){return{}.hasOwnProperty.call(y,t)?y[t]:-1},w=function(t,e){y[t]=e},_=function(t,e,n,r){return t+" - "+(e||n+(r?" - "+r:""))},T=function(){for(var t,e=[],n=function(n){if(g.includes(h[n].name))e.push(h[n]),v[h[n].name]=n;else{t=i.filter((function(t){return(t.outputAs||t.column+(t.operation?" - "+t.operation:""))===h[n].name}))[0];for(var r=0;r<l.length;r++)e.push({name:_(l[r],t.outputAs,t.column,t.operation),type:h[n].type})}},r=0;r<d;r++)n(r);return e},x=[];switch(u=Fu(o.concat({column:a}),i),s=u.fn(t,e,n,r),f=Ta(a,t,e),p=wa(a,s.schema),s.schema[p].type){case fo.Number:case fo.DateTime:c=mo;break;default:c=vo}l=f&&f.sort((function(t,e){return c(t,e)}))||[],h=s.schema.filter((function(t){return t.name!==a})),d=h.length,g=o.map((function(t){return t.outputAs||t.column})),m=T(),s.data.length>0&&(x=function(t){var e,n,r,o,u,c=[],f=t.length,l={},h={},d="";for(e=0;e<f;e++)l[t[e].name]=e;for(e=0;e<s.data.length;e++){for(h={},d="",n=0;n<s.schema.length;n++)!{}.hasOwnProperty.call(v,s.schema[n].name)?s.schema[n].name!==a&&(o=i.filter((function(t){return(t.outputAs||t.column+(t.operation?" - "+t.operation:""))===s.schema[n].name}))[0],(u=l[_(s.data[e][p],o.outputAs,o.column,o.operation)])&&(h[u]=s.data[e][n])):(h[l[s.schema[n].name]]=s.data[e][n],s.schema[n].type===fo.Interval?d+=s.data[e][n].start:d+=s.data[e][n]);if((r=b(d))>-1){var g=c[r];for(var m in h)g[m]=h[m]}else{var y=new Array(f);for(var T in h)y[T]=h[T];c.push(y),w(d,c.length-1)}}return c}(m));return{data:x,schema:m,config:{indexBy:s.config.indexBy===a?void 0:s.config.indexBy}}}(t,e,n,a,r,i,o)}}}},Nu.Utils={duration:Au,before:function(t,e,n,r){if(!t)throw new Error("duration is missing");if(e&&(isNaN(e)||isNaN(+new Date(e))))throw new Error("timestamp is incorrect");return Su(isNaN(e)?+new Date:e,t.Unit,-t.number,n)},after:function(t,e,n,r){if(!t)throw new Error("duration is missing");if(e&&(isNaN(e)||isNaN(+new Date(e))))throw new Error("timestamp is incorrect");return Su(isNaN(e)?+new Date:e,t.Unit,t.number,n)},parseDate:function(t,e,n){var r;if(e&&(r=(r=(void 0!==n&&n?ba.utcParser(e):ba.parser(e)).parse(t))&&r.getTime()),r||(r=void 0!==n&&n?+new Date(t+"Z"):+new Date(t)),!r)throw new Error("Incorrect string or format provided");return r},formatDate:function(t,e,n){var r,o=e;if(isNaN(parseInt(t,10)))throw new Error("Timestamp must be a number: "+t);if(o||(o="%a, %-d %b %Y, %H:%M:%S:%L"),!(r=(void 0!==n&&n?ba.utcFormatter(o):ba.formatter(o)).format(new Date(t))))throw new Error("Incorrect format provided: "+o);return r},DatetimeUnits:ho,Weekdays:po},Nu.Aggregators={AggregatorStore:yu},Nu}));
